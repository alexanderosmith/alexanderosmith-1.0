/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("event-valuechange",function(e,t){var n="_valuechange",r="value",i="nodeName",s,o={POLL_INTERVAL:50,TIMEOUT:1e4,_poll:function(t,r){var i=t._node,s=r.e,u=t._data&&t._data[n],a=0,f,l,c,h,p,d;if(!i||!u){o._stopPolling(t);return}l=u.prevVal,h=u.nodeName,u.isEditable?c=i.innerHTML:h==="input"||h==="textarea"?c=i.value:h==="select"&&(p=i.options[i.selectedIndex],c=p.value||p.text),c!==l&&(u.prevVal=c,f={_event:s,currentTarget:s&&s.currentTarget||t,newVal:c,prevVal:l,target:s&&s.target||t},e.Object.some(u.notifiers,function(e){var t=e.handle.evt,n;a!==1?e.fire(f):t.el===d&&e.fire(f),n=t&&t._facade?t._facade.stopped:0,n>a&&(a=n,a===1&&(d=t.el));if(a===2)return!0}),o._refreshTimeout(t))},_refreshTimeout:function(e,t){if(!e._node)return;var r=e.getData(n);o._stopTimeout(e),r.timeout=setTimeout(function(){o._stopPolling(e,t)},o.TIMEOUT)},_startPolling:function(t,s,u){var a,f;if(!t.test("input,textarea,select")&&!(f=o._isEditable(t)))return;a=t.getData(n),a||(a={nodeName:t.get(i).toLowerCase(),isEditable:f,prevVal:f?t.getDOMNode().innerHTML:t.get(r)},t.setData(n,a)),a.notifiers||(a.notifiers={});if(a.interval){if(!u.force){a.notifiers[e.stamp(s)]=s;return}o._stopPolling(t,s)}a.notifiers[e.stamp(s)]=s,a.interval=setInterval(function(){o._poll(t,u)},o.POLL_INTERVAL),o._refreshTimeout(t,s)},_stopPolling:function(t,r){if(!t._node)return;var i=t.getData(n)||{};clearInterval(i.interval),delete i.interval,o._stopTimeout(t),r?i.notifiers&&delete i.notifiers[e.stamp(r)]:i.notifiers={}},_stopTimeout:function(e){var t=e.getData(n)||{};clearTimeout(t.timeout),delete t.timeout},_isEditable:function(e){var t=e._node;return t.contentEditable==="true"||t.contentEditable===""},_onBlur:function(e,t){o._stopPolling(e.currentTarget,t)},_onFocus:function(e,t){var s=e.currentTarget,u=s.getData(n);u||(u={isEditable:o._isEditable(s),nodeName:s.get(i).toLowerCase()},s.setData(n,u)),u.prevVal=u.isEditable?s.getDOMNode().innerHTML:s.get(r),o._startPolling(s,t,{e:e})},_onKeyDown:function(e,t){o._startPolling(e.currentTarget,t,{e:e})},_onKeyUp:function(e,t){(e.charCode===229||e.charCode===197)&&o._startPolling(e.currentTarget,t,{e:e,force:!0})},_onMouseDown:function(e,t){o._startPolling(e.currentTarget,t,{e:e})},_onSubscribe:function(t,s,u,a){var f,l,c,h,p;l={blur:o._onBlur,focus:o._onFocus,keydown:o._onKeyDown,keyup:o._onKeyUp,mousedown:o._onMouseDown},f=u._valuechange={};if(a)f.delegated=!0,f.getNodes=function(){return h=t.all("input,textarea,select").filter(a),p=t.all('[contenteditable="true"],[contenteditable=""]').filter(a),h.concat(p)},f.getNodes().each(function(e){e.getData(n)||e.setData(n,{nodeName:e.get(i).toLowerCase(),isEditable:o._isEditable(e),prevVal:c?e.getDOMNode().innerHTML:e.get(r)})}),u._handles=e.delegate(l,t,a,null,u);else{c=o._isEditable(t);if(!t.test("input,textarea,select")&&!c)return;t.getData(n)||t.setData(n,{nodeName:t.get(i).toLowerCase(),isEditable:c,prevVal:c?t.getDOMNode().innerHTML:t.get(r)}),u._handles=t.on(l,null,null,u)}},_onUnsubscribe:function(e,t,n){var r=n._valuechange;n._handles&&n._handles.detach(),r.delegated?r.getNodes().each(function(e){o._stopPolling(e,n)}):o._stopPolling(e,n)}};s={detach:o._onUnsubscribe,on:o._onSubscribe,delegate:o._onSubscribe,detachDelegate:o._onUnsubscribe,publishConfig:{emitFacade:!0}},e.Event.define("valuechange",s),e.Event.define("valueChange",s),e.ValueChange=o},"3.16.0",{requires:["event-focus","event-synthetic"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("event-tap",function(e,t){function a(t,n){n=n||e.Object.values(u),e.Array.each(n,function(e){var n=t[e];n&&(n.detach(),t[e]=null)})}var n=e.config.doc,r=e.Event._GESTURE_MAP,i=r.start,s="tap",o=/pointer/i,u={START:"Y_TAP_ON_START_HANDLE",END:"Y_TAP_ON_END_HANDLE",CANCEL:"Y_TAP_ON_CANCEL_HANDLE"};e.Event.define(s,{publishConfig:{preventedFn:function(e){var t=e.target.once("click",function(e){e.preventDefault()});setTimeout(function(){t.detach()},100)}},processArgs:function(e,t){if(!t){var n=e[3];return e.splice(3,1),n}},on:function(e,t,n){t[u.START]=e.on(i,this._start,this,e,t,n)},detach:function(e,t,n){a(t)},delegate:function(t,n,r,s){n[u.START]=e.delegate(i,function(e){this._start(e,t,n,r,!0)},t,s,this)},detachDelegate:function(e,t,n){a(t)},_start:function(e,t,n,i,s){var a={canceled:!1,eventType:e.type},f=n.preventMouse||!1;if(e.button&&e.button===3)return;if(e.touches&&e.touches.length!==1)return;a.node=s?e.currentTarget:t,e.touches?a.startXY=[e.touches[0].pageX,e.touches[0].pageY]:a.startXY=[e.pageX,e.pageY],e.touches?(n[u.END]=t.once("touchend",this._end,this,t,n,i,s,a),n[u.CANCEL]=t.once("touchcancel",this.detach,this,t,n,i,s,a),n.preventMouse=!0):a.eventType.indexOf("mouse")!==-1&&!f?(n[u.END]=t.once("mouseup",this._end,this,t,n,i,s,a),n[u.CANCEL]=t.once("mousecancel",this.detach,this,t,n,i,s,a)):a.eventType.indexOf("mouse")!==-1&&f?n.preventMouse=!1:o.test(a.eventType)&&(n[u.END]=t.once(r.end,this._end,this,t,n,i,s,a),n[u.CANCEL]=t.once(r.cancel,this.detach,this,t,n,i,s,a))},_end:function(e,t,n,r,i,o){var f=o.startXY,l,c,h=15;n._extra&&n._extra.sensitivity>=0&&(h=n._extra.sensitivity),e.changedTouches?(l=[e.changedTouches[0].pageX,e.changedTouches[0].pageY],c=[e.changedTouches[0].clientX,e.changedTouches[0].clientY]):(l=[e.pageX,e.pageY],c=[e.clientX,e.clientY]),Math.abs(l[0]-f[0])<=h&&Math.abs(l[1]-f[1])<=h&&(e.type=s,e.pageX=l[0],e.pageY=l[1],e.clientX=c[0],e.clientY=c[1],e.currentTarget=o.node,r.fire(e)),a(n,[u.END,u.CANCEL])}})},"3.16.0",{requires:["node-base","event-base","event-touch","event-synthetic"]});
YUI.add("better-throttle",function(t){"use strict";t.betterThrottle=function(e,n,r,i){function u(){o&&(o.cancel(),o=void 0)}function l(){u(),e.apply(r,arguments)}var a,o;return a=0,r=r||null,function(){var e=(new Date).getTime();if(i)u();else if(e-a>n)return a=e,void l.apply(r,arguments);o||(o=t.later(n,r,l,arguments))}}},"@VERSION@",{requires:["yui-later"]});YUI.add("global-events",function(e){"use strict";var t={"window:click":{type:"click",target:window},"window:resize":{type:"resize",target:window,throttle:100},"window:scroll":{type:"scroll",target:window,throttle:100},"window:scroll:nothrottle":{type:"scroll",target:window,throttle:0},"window:keydown":{type:"keydown",target:window,throttle:0},"window:blur":{type:"blur",target:window,throttle:0},"document:fullscreenchange":{type:"onfullscreenchange"in document?"fullscreenchange":"onwebkitfullscreenchange"in document?"webkitfullscreenchange":"onmozfullscreenchange"in document?"mozfullscreenchange":"onmsfullscreenchange"in document?"MSFullscreenChange":void 0,target:document}},n={};e.globalEvents={subscribe:function(o,r){var l,c=t[o];if(c)return c.bound||((function(t){t in e.Node.DOM_EVENTS||(e.Node.DOM_EVENTS[t]=null)})(c.type),c.throttle?c.handle=e.one(c.target).on(c.type,e.betterThrottle(function(t){e.fire(o,{e:t})},c.throttle)):c.handle=e.one(c.target).on(c.type,function(t){e.fire(o,{e:t})}),n[o]=[],c.bound=!0),l=e.on(o,r),l.origDetach=l.detach,l.detach=function(){this.detach=this.origDetach,delete this.origDetach,e.globalEvents.unsubscribe(this)}.bind(l),n[o].push(l),l;throw new Error("global event name: '"+o+"' does not exist")},unsubscribe:function(e){var o=e.evt.type,r=n[o].indexOf(e);e.origDetach&&(e.detach=e.origDetach),-1!==r&&(e.detach(),n[o].splice(r,1),0===n[o].length&&(t[o].handle.detach(),t[o].bound=!1))}}},"@VERSION@",{requires:["event","node","better-throttle"],affinity:"client"});"undefined"!=typeof YAHOO&&YAHOO||(YAHOO={}),YAHOO.i13n=YAHOO.i13n||{},YAHOO.i13n.EventTypes=(function(){function e(e,t,n){this.yqlid=e,this.eventName=t,this.spaceidPrefix=n}var t="richview";e.prototype={getYQLID:function(){return this.yqlid},getEventName:function(){return this.eventName}};var n={pageview:new e("pv","pageview",""),simple:new e("lv","event","P"),linkview:new e("lv","linkview","P"),richview:new e(t,t,"R"),contentmodification:new e(t,"contentmodification","R"),dwell:new e("lv","dwell","D")};return{getEventByName:function(e){return n[e]}}})(),YAHOO.i13n.Rapid=function(e){function t(){}function n(e){this.map={},this.count=0,e&&this.absorb(e)}function r(){this.map={},this.count=0}function i(e,t){if(!e)return null;null===t&&(t=!1);var n=new r,i=L.getAttribute(e,L.data_action_outcome);i&&n.set("outcm",i);var o=L.getAttribute(e,"data-ylk");if(null===o||0===o.length)return n;for(var a=o.split(L.ylk_pair_delim),s=0,l=a.length;l>s;s++){var c=a[s].split(L.ylk_kv_delim);if(2===c.length){var u=c[0],d=c[1];null!==u&&""!==u&&null!==d&&(d.length>L.MAX_VALUE_LENGTH&&(d=d.substring(0,L.MAX_VALUE_LENGTH)),u.length<=8&&d.length<=L.MAX_VALUE_LENGTH&&("_p"!==u||t)&&n.set(u,d))}}return n}function o(t){var n=(YAHOO.i13n,YAHOO.i13n.TEST_ID||t.test_id),r=t.location||document.location.href;(function(t,n){O.set("A_sid",YAHOO.i13n.A_SID||L.rand()),O.set("_w",L.rmProto(n).substring(0,L.MAX_VALUE_LENGTH)),t?O.absorb(t):e.keys&&O.absorb(e.keys)})(t.keys,r),n&&(n=L.norm(""+n));var i=t.override||{},o={override:i,version:"3.39.1",keys:O,referrer:t.referrer,getReferrer:function(){return L.norm(L.clref(void 0!==this.referrer?this.referrer:document.referrer))},spaceid:L.norm(i.spaceid||YAHOO.i13n.SPACEID||t.spaceid),yrid:L.norm(t.yrid||""),oo:t.oo?"1":"0",nol:t.nol?"1":"0",yql_enabled:!1!==t.yql_enabled,fing:1==t.use_fing,USE_RAPID:!1!==t.use_rapid,linktrack_attribut:t.lt_attr||"text",tracked_mods:t.tracked_mods||[],tracked_mods_viewability:t.tracked_mods_viewability||[],viewability:t.viewability||!1,viewability_time:t.viewability_time||300,viewability_px:t.viewability_px||50,lt_attr:t.lt_attr||"text",client_only:t.client_only,text_link_len:t.text_link_len||-1,test_id:n,yql_host:t.yql_host||"geo.query.yahoo.com",yql_path:t.yql_path||"/v1/public/yql",click_timeout:t.click_timeout||1e4,compr_timeout:t.compr_timeout||700,compr_on:!1!==t.compr_on,compr_type:t.compr_type||"deflate",webworker_file:YAHOO.i13n.WEBWORKER_FILE||t.webworker_file||"rapidworker-1.2.js",nofollow_classname:t.nofollow_class||"rapidnofollow",no_click_listen:t.rapid_noclick_resp||"rapid-noclick-resp",nonanchor_track_class:t.nonanchor_track_class||"rapid-nonanchor-lt",anc_pos_attr:"data-rapid_p",anc_v9y_attr:"data-v9y",deb:!0===t.debug,ldbg:t.ldbg>0||r.indexOf("yhldebug=1")>0,addmod_timeout:t.addmodules_timeout||300,ult_token_capture:"boolean"==typeof t.ult_token_capture&&t.ult_token_capture,track_type:t.track_type||"data-tracktype",dwell_on:!0===t.dwell_on,prerender:!0===t.prerender,query_parameters:!0===t.query_parameters,async_all_clicks:!0===t.async_all_clicks,click_postmsg:t.click_postmsg||{},apv:!1!==t.apv,apv_time:t.apv_time||500,apv_px:t.apv_px||500,apv_always_send:!0===t.apv_always_send,ex:!0===t.ex,persist_asid:!0===t.persist_asid,track_right_click:!0===t.track_right_click,gen_bcookie:!0===t.gen_bcookie,skip_attr:t.skip_attr||"data-rapid-skip",parse_dom:!0===t.parse_dom,pageview_on_init:!1!==t.pageview_on_init,perf_navigationtime:t.perf_navigationtime||0,perf_commontime:t.perf_commontime||null,perf_usertime:t.perf_usertime||null,perf_resourcetime:t.perf_resourcetime||0,sample:t.sample||{},loc:r,fpc:!0===t.fpc,extendbcookie:!0===t.extendbcookie},a=1*o.compr_timeout;return L.isNum(a)?o.compr_timeout=(function(e,t,n){return t>e?t:e>n?n:e})(a,300,700):o.compr_timeout=700,o.ldbg&&1e4!=o.click_timeout&&s("Click timeout set to "+o.click_timeout+"ms (default 10000ms)"),t.apv_callback&&"function"==typeof t.apv_callback?o.apv_callback=t.apv_callback:o.apv_callback=null,o}function a(){O.set("A_sid",L.rand())}function s(e){P.ldbg&&console.warn("RAPID WARNING: "+e)}function l(e){P.ldbg&&console.error("RAPID ERROR: "+e)}function c(e){P.ldbg&&console.log("Rapid-"+P.version+"("+(new Date).getTime()+"):"+e)}function u(){var e=document.cookie;if(this.cookieMap={},/[^=]+=[^=;]?(?:; [^=]+=[^=]?)?/.test(e))for(var t=e.split(/;\s/g),n=null,r=null,i=null,o=0,a=t.length;a>o;o++){if((i=t[o].match(/([^=]+)=/i))instanceof Array)try{n=L.dec(i[1]),r=L.dec(t[o].substring(i[1].length+1))}catch(e){l(e)}else n=L.dec(t[o]),r=n;"B"!==n&&"BX"!==n&&"TT"!==n&&"D"!==n&&"_ga"!==n&&"yx"!==n&&"rxx"!==n||(this.cookieMap[n]=r)}L.clearCookie("rx","/",L.isIE?document.domain:"")}function d(){var e=null,t=null;return e=(new Date).valueOf().toString(),t=e.length,{ts:e.substr(0,t-3),ms:e.substr(t-3)}}function f(e,t,n,r){var i=new Date,o="";i.setTime(i.getTime()+1e3*n),o="; expires="+i.toGMTString();var a="";r&&(a=";domain="+r);var s=e+"="+t+o+a+"; path=/";document.cookie=s}function p(e,t,n,r,o,a,s){var l="",c=null,u=!s||L.isAboveFold(r),d={viewable:u,data:{sec:t,_p:n}};return s&&L.aug(d.data,{A_lv:1}),a?(d.data.slk=o||"section",c=i(r)):(r.setAttribute(P.anc_pos_attr,n),s&&r.setAttribute(P.anc_v9y_attr,u?"1":"0"),(l=L.getLT(r,e))&&""!==l?c=i(r):l="_ELINK_",d.data.slk=o||l),null!==c&&L.aug(d.data,c.getAll()),d}function m(e){return"input"===e.nodeName.toLowerCase()&&"submit"===L.getAttribute(e,"type")}function v(e,t){var n=_(e,t);V=n,n&&(e.ctrlKey||e.metaKey||H&&H.stop_dwell()&&(n.pp={etag:"dwell,stop",usergenf:1,A_prets:X?X.ts:null,A_prems:X?X.ms:null},H.destroy()),I.sendClick(n))}function g(e,t,n,r){n=n||{};var i=null;return e?(i=YAHOO.i13n.EventTypes.getEventByName(e),n._E=i.getEventName(),t=n._E):n._E=t||"_",r&&(n.outcm=r),{type:i,name:t,data:n,outcome:r}}function _(e,t){e=e||event;for(var n=L.getTarget(e),r="button",o="",a=!1,s=null;n&&(o=n.nodeName.toLowerCase())&&"a"!==o&&o!==r&&!m(n)&&!L.hasClass(n,P.nonanchor_track_class);)n=n.parentNode;if(!n||L.hasClass(n,P.no_click_listen))return 0;if(L.hasClass(n,P.nonanchor_track_class)){s={pos:0,sec:t.moduleName,slk:"_"};var l=i(n,1);l&&L.aug(s,l.getAll())}else{var c=L.getAttribute(n,P.anc_pos_attr);if(!(s=t.getLinkAtPos(c)))return 0;s=s.data,"input"===o||o===r||(function(e,t,n){var r=L.getAttribute;return t.target&&"_blank"===t.target.toLowerCase()||2===e.which||4===e.button||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||"on"===r(t,"data-nofollow")||r(t,"href")&&"javascript:"===r(t,"href").substr(0,11).toLowerCase()||L.hasClass(t,P.nofollow_classname)||L.hasClass(n,P.nofollow_classname)})(e,n,t.moduleElement)||(a=!0)}if(!s.tar){var u=L.getAttribute(n,"href");u&&(s.tar=L.extDomain(u)),u&&s.tar||(s.tar=L.extDomain(P.loc))}s.tar_uri||(n.pathname?s.tar_uri=n.pathname.substring(0,L.MAX_VALUE_LENGTH):s.tar_uri="");var d=t.moduleYLK;if(d){var f=d.getAll();L.aug(s,f,function(e){return!(e in s)})}return s.A_xy=L.xy(e),s.A_sr=L.sr(),"contextmenu"==e.type&&(s.A_cl=3,a=!1),{data:s,event:e,moduleElement:t.moduleElement,targetElement:n,synch:a,hasTargetTop:n&&n.target&&"_top"===n.target.toLowerCase()}}function h(e,t,n){t||(t=document);for(var r=e.split(","),i=[],o=0,a=r.length;a>o;o++)for(var s=t.getElementsByTagName(r[o]),l=0,c=s.length;c>l;l++){var u=s[l];n&&!n.call(0,u)||i.push(u)}var d=i[0];return d?(d.sourceIndex?i.sort(function(e,t){return e.sourceIndex-t.sourceIndex}):d.compareDocumentPosition&&i.sort(function(e,t){return 3-(6&e.compareDocumentPosition(t))}),i):[]}function w(e,t,n,r){t||(t=document);var i=e.split(",");n=n||[];var o=t.childNodes;if("true"!==L.getAttribute(t,P.skip_attr))for(var a=0,s=o.length;s>a;a++){var l=o[a];L.isTagOfInterest(l,i)&&(r&&!r.call(0,l)||n.push(l)),"true"!==L.getAttribute(l,P.skip_attr)?w(e,l,n,r):"true"===L.getAttribute(l,P.skip_attr)&&n.push(l)}var c=n[0];return c?(c.sourceIndex?n.sort(function(e,t){return e.sourceIndex-t.sourceIndex}):c.compareDocumentPosition&&n.sort(function(e,t){return 3-(6&e.compareDocumentPosition(t))}),n):[]}function y(e,t,n){function r(t,r){var o=[];r=r||1;for(var s=0,l=t.length;l>s;s++)if("div"===t[s].tagName.toLowerCase()){var c=t[s],f=i(c),v=p(m,u.map.sec||e,1,c,f.map.slk||u.map.slk,!0,n);d[0]=v,o.push(v)}else{var g=t[s],v=p(m,u.map.sec||e,r,g,u.map.slk,0,n);d[r-1]=v,o.push(v),r++}if("true"===L.getAttribute(a,P.skip_attr)){v=p(m,u.map.sec||e,1,c,u.map.slk,!0,n);d[0]=v,o.push(v)}return o}function o(e){return!L.getAttribute(e,P.anc_pos_attr)}var a=document.getElementById(t),l="a,button,input";if(!a)return s("Specified module not in DOM: "+t),null;var u=i(a),d=[],f=P.parse_dom?w(l,a):h(l,a),m=(function(e,t){return L.hasClass(e,"rapid_track_href")?"href":L.hasClass(e,"rapid_track_text")?"text":L.hasClass(e,"rapid_track_title")?"title":L.hasClass(e,"rapid_track_id")?"id":t})(a,P.lt_attr),g=f.length,_=L.getAttribute(a,P.track_type);r(f);var y={useViewability:n,moduleYLK:u,links:d,moduleName:e,trackType:_,moduleElement:a,refreshModule:function(e,t,i,a){a.isRefreshed=!0;var s=P.parse_dom?w(l,L.$(e),null,o):h(l,L.$(e),o);if(!0===t||s.length>0){var u=r(s,g+1);g+=s.length;var d=s.length;if(n){d=0;for(var f=0,p=u.length;p>f;f++)u[f].viewable&&d++}if((!0===t||d>0)&&(P.USE_RAPID||a.event)){var m={};L.aug(m,this),m.links=i?u:[],(!0===t||i)&&I.sendRefreshedContent(m,t,a)}}else L.ldbg&&c("refreshModule("+e+") - no new links.");!0===t&&P.apv&&N&&N.reInit()},reevaluateViewableLinks:function(){var t=d.length,n=h("a",this.moduleElement,(function(t){return function(n){if(!L.getAttribute(n,P.anc_pos_attr)){t++,n.setAttribute(P.anc_pos_attr,t);var r=p(m,u.map.sec||e,t,n,u.map.slk,0,!1);d[t-1]=r}return!("1"===L.getAttribute(n,P.anc_v9y_attr)||!L.isAboveFold(n))&&(n.setAttribute(P.anc_v9y_attr,"1"),!0)}})(t));if(0!==n.length&&P.USE_RAPID){var r=(function(t){for(var n=[],r=0,i=t.length;i>r;r++){var o=t[r],a=L.getAttribute(o,P.anc_pos_attr),s=p(m,u.map.sec||e,a,o,u.map.slk,0,!0);n.push(s)}return n})(n),i={};L.aug(i,this),i.links=r,I.sendRefreshedContent(i,!1,{})}},removeHandlers:function(){L.rmEvent(a,"click",b),P.track_right_click&&L.rmEvent(a,"contextmenu",b)},getLinkAtPos:function(e){return e>d.length?null:d[e-1]},identifier:t},b=function(e){v(e,y)};return L.addEvent(a,"click",b),P.track_right_click&&L.addEvent(a,"contextmenu",b),y}function b(e,t,n){P.ldbg&&c("beaconPageview called, pp="+L.fData(e)),t&&!P.persist_asid&&a(),(P.USE_RAPID||P.apv_always_send&&L.hasOwn(e,"A_apv"))&&I.sendRapidNoDelay([],!0,e,null,n),P.apv&&null!=N&&N.reInit()}function k(e,t,n,r){P.ldbg&&c('beaconEvent: event="'+e+'" data='+L.fData(t)+" outcome="+n);var i=g(0,e,t,n);I.sendEvents(i,r)}function A(){var e=null,t=lastApvTime=(new Date).getTime(),n=L.getScrollY(),r=-1,i=function(){var e=L.getScrollY(),t=-1===r?e-n:e-r,i=t>0?0:1;if(Math.abs(t)>P.apv_px){b({A_apv:1,A_apx:e,A_asd:i},!1,!0),r=e,lastApvTime=(new Date).getTime(),P.apv_callback&&P.apv_callback.call(this,{pixel_pos:e,scroll_dir:i})}},o=function(){null!=e&&clearTimeout(e);var r=(new Date).getTime();r-t<P.apv_time&&(n=L.getScrollY(),lastApvTime=r),e=setTimeout(function(){i()},P.apv_time)};L.addEvent(window,"scroll",o),this.reInit=function(){n=L.getScrollY(),r=-1,t=lastApvTime=(new Date).getTime()},this.destroy=function(){L.rmEvent(window,"scroll",o)}}function E(){var e={focus:{state:"start",etrg:"show",etag:"dwell,start",jse:"window.focus"},pageshow:{state:"start",etrg:"show",etag:"dwell,start",jse:"window.pageshow"},"visibilitychange-visible":{state:"start",etrg:"show",etag:"dwell,start",jse:"document.visibilitychange"},blur:{state:"stop",etrg:"hide",etag:"dwell,stop",jse:"window.blur"},pagehide:{state:"stop",etrg:"hide",etag:"dwell,stop",jse:"window.pagehide"},"visibilitychange-hidden":{state:"stop",etrg:"hide",etag:"dwell,stop",jse:"document.visibilitychange"},beforeunload:{state:"stop",etrg:"close",etag:"dwell,stop",jse:"window.beforeunload"}},t="start";X=d();var n,r;void 0!==document.hidden?(n="hidden",r="visibilitychange"):void 0!==document.mozHidden?(n="mozHidden",r="mozvisibilitychange"):void 0!==document.msHidden?(n="msHidden",r="msvisibilitychange"):void 0!==document.webkitHidden&&(n="webkitHidden",r="webkitvisibilitychange");var i=function(i){var o="",a=i.type;if(i.type==r&&(a=document[n]?"visibilitychange-hidden":"visibilitychange-visible"),L.hasOwn(e,a)&&(o=e[a].state),0!=o.length){if(t==o)return void c("dwell: -- state already "+t+" (event="+a+")");t=o;var s=e[a];c("dwell: change state to "+t+" (event="+a+")");var l={etrg:s.etrg,outcm:"window",usergenf:1,etag:s.etag,A_jse:s.jse};"start"===t&&(X=d(),null!=G&&(l.A_prets=G.ts,l.A_prems=G.ms)),"stop"===t&&(G=d(),null!=X&&(l.A_prets=X.ts,l.A_prems=X.ms)),k("dwell",l,"")}};for(var o in e)e.hasOwnProperty(o)&&L.addEvent(window,o,i);L.addEvent(window,r,i),this.set_state=function(e){t=e},this.start_dwell=function(){return"start"===t?(c("dwell: -- state already "+t),!1):(t="start",X=d(),!0)},this.stop_dwell=function(){return"stop"===t?(c("dwell: -- state already "+t),!1):(t="stop",G=d(),!0)},this.destroy=function(){for(var t in e)e.hasOwnProperty(t)&&L.rmEvent(window,t,i);L.rmEvent(window,r,i)}}function T(e,t){if(window.performance&&window.performance.timing){var r=e?e.perf_navigationtime||0:P.perf_navigationtime||0,i=e?e.perf_resourcetime||0:P.perf_resourcetime||0,o=e?e.perf_commontime||null:P.perf_commontime||null,a=e?e.perf_usertime||null:P.perf_usertime||null;if(!(1>r&&1>i)||o||a){var s=L.hasOwn(P.sample,"perf_navigationtime")?P.sample.perf_navigationtime:100,l=L.hasOwn(P.sample,"perf_resourcetime")?P.sample.perf_resourcetime:100,c=L.samplingSuccess(s),u=L.samplingSuccess(l);if(c||u){if(0===window.performance.timing.loadEventStart){if((j+=10)>200)return;return void setTimeout(function(){T(e,t)},10)}var d=new n(C(r,i,o,a,c,u));"object"==typeof t&&d.absorb(t);var f=g(0,"pageperf",d.getAll(),"");I.sendEvents(f)}}}}function C(e,t,n,r,i,o){var a={},s=window.performance.timing;if(i&&e>0&&(S(s.responseStart,s.connectEnd,a,"A_pfb"),S(s.responseEnd,s.responseStart,a,"A_pbp"),S(s.responseEnd,s.requestStart,a,"A_psr"),S(s.loadEventStart,s.navigationStart,a,"A_pol"),S(s.domInteractive,s.navigationStart,a,"A_pdi")),i&&e>1&&(S(s.redirectEnd,s.redirectStart,a,"A_prd"),S(s.domainLookupEnd,s.domainLookupStart,a,"A_pdl"),S(s.connectEnd,s.secureConnectionStart,a,"A_psh"),S(s.connectEnd,s.connectStart,a,"A_psc"),S(s.loadEventStart,s.responseEnd,a,"A_pfe")),o&&t>0&&void 0!==window.performance.getEntries){var l=[],c=window.performance.getEntries();c.sort(function(e,t){return e.duration>t.duration?-1:e.duration<t.duration?1:0});for(var u=c.slice(0,10),d=u.length,f=0;d>f;f++){var p={},m=u[f].name.replace(/\?.+$/,"");m=m.replace(/^.+\//,""),p.name=m,p.dur=Math.floor(u[f].duration),p.st=Math.floor(u[f].startTime),l.push(p)}a.A_res=L.sfy(l)}if(n&&(L.hasOwn(n,"initialPageLoad")&&(a.A_cmi=L.sfy(n.initialPageLoad)),L.hasOwn(n,"afterPageLoad")&&(a.A_cma=L.sfy(n.afterPageLoad))),r)for(var v=["utm"],f=0;f<v.length;f++)L.hasOwn(r,v[f])&&(a.A_utm=L.sfy(r[v[f]]));return a.etrg="backgroundPost",a.outcm="performance",a.usergenf=0,a.etag="performance",a}function S(e,t,n,r){if(e&&t){var i=e-t;n[r]=i}}function x(e){var t=navigator.userAgent,n=Object.prototype,r=t.match(/MSIE\s[^;]*/)||t.match(/Trident\/[^;]*/)?1:0,i=/KHTML/.test(t)?1:0,o=null!==t.match(/(iPhone|iPad|iPod)/gi),a=(t.indexOf("Android"),o&&null!==t.match(/AppleWebKit/)),s=null!==t.match(/AppleWebKit/)&&null===t.match(/Chrome/),c=new RegExp(/\ufeff|\uffef|[\u0000-\u001f]|[\ue000-\uf8ff]/g),d=new RegExp(/[\u007f-\u00a0]|\s{2,}/g),f="http://",p="https://",m="class",v=" ",g=-1,_=-1,h="https:"===window.location.protocol;return r&&(document.documentMode?_=document.documentMode:(_=5,document.compatMode&&"CSS1Compat"==document.compatMode&&(_=7))),{$:function(e){return document.getElementById(e)},ca:"%01",cb:"%02",cc:"%03",cd:"%04",ce:"%05",cf:"%06",cg:"%07",ch:"%08",ylk_kv_delim:e.ylk_kv_delim||":",ylk_pair_delim:e.ylk_pair_delim||";",DATA_ACTION:"data-action",data_action_outcome:"data-action-outcome",isIE:r,isIOSSafari:a,isSafari:s,isWebkit:i,ieV:_,MAX_VALUE_LENGTH:e.max_value_length||300,value_len_whitelist:["A_res","A_cmi","A_cma","A_utm"],hasOwn:function(e,t){return n.hasOwnProperty.call(e,t)},enc:encodeURIComponent,dec:decodeURIComponent,getQueryStringValue:function(e,t){return decodeURIComponent(e.replace(new RegExp("^(?:.*[&\\?]"+encodeURIComponent(t).replace(/[\.\+\*]/g,"\\$&")+"(?:\\=([^&]*))?)?.*$","i"),"$1"))},curProto:function(){return h?p:f},isSecure:function(){return h},isScrollHorizontalVisible:function(){return document.documentElement.scrollWidth>document.documentElement.clientWidth},getCompStyle:function(e,t){return void 0!==window.getComputedStyle?window.getComputedStyle(e,t):(this.el=e,this.getPropertyValue=function(t){var n=/(\-([a-z]){1})/g;return"float"==t&&(t="styleFloat"),n.test(t)&&(t=t.replace(n,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:0},this)},getBorder:function(e,t){if(!e||!t)return 0;var n=parseInt(this.getCompStyle(e,null).getPropertyValue(t),10);return isNaN(n)&&(n=0),n},getElementHeight:function(e){if(!e)return 0;var t=e.offsetHeight||0;return t?t-this.getBorder(e,"border-top-width")-this.getBorder(e,"border-bottom-width"):0},getPositionTop:function(e){for(var t=0;e;)t+=e.offsetTop,e=e.offsetParent;return t},getScrollbarWidthHeight:function(){var e=this.make("div");e.style.overflow="scroll",e.style.visibility="hidden",e.style.position="absolute",e.style.width="100px",e.style.height="100px",document.body.appendChild(e);var t={width:e.offsetWidth-e.clientWidth,height:e.offsetHeight-e.clientHeight};return this.rmBodyEl(e),t},isAboveFold:function(e){if(r&&7>=_)return!0;var t=L.getCompStyle(e);if("hidden"==t.visibility||"none"==t.display)return!1;var n=e.getBoundingClientRect(),i=.5*this.getElementHeight(e);if(n.top+i<0)return!1;var o=window.innerHeight||document.documentElement.clientHeight;if(this.isScrollHorizontalVisible()){o-=this.getScrollbarWidthHeight().height}return n.bottom-i<=o||void 0},strip:function(e){for(var t={"/":"P",";":"1","?":"P","&":"1","#":"P"},n={url:e,clean:"",cookie:"",keys:[]},r=0;-1!==e.indexOf("_yl",r);){var i=e.indexOf("_yl",r);if(i>r&&(n.clean+=e.slice(r,i-1)),r=i+3,t[e.charAt(i-1)]&&"="===e.charAt(i+4)){n.ult=1;var o="_yl"+e.charAt(i+3),a="";for(i+=5;i<e.length&&!t[e.charAt(i)];i++)a+=e.charAt(i);n.keys.push(o),n[o]=a,"_ylv"!==o&&(n.cookie+="&"+o+"="+a),t[e.charAt(i)]&&"P"===t[e.charAt(i)]&&(n.clean+=e.charAt(i)),r=i+1}else n.clean+=e.slice(i-1,r)}return n.ult&&(n.cookie=n.cookie.substr(1),n.clean+=e.substr(r),n._ylv),n},prevDef:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},appBodyEl:function(e){document.body.appendChild(e)},rmBodyEl:function(e){document.body.removeChild(e)},sa:function(e,t,n){e.setAttribute(t,n)},getScrollY:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},make:function(e,t){var n=document.createElement(e);if(t&&this.isObj(t))for(var r in t)this.sa(n,r,t[r]);return n},getXHR:function(){var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}];return(function(){for(var t=!1,n=e.length,r=0;n>r;r++){try{t=e[r]()}catch(e){continue}break}return t})()},hasLS:function(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}},hasCORS:function(){return!(r&&10>_)&&("withCredentials"in new XMLHttpRequest||"undefined"!=typeof XDomainRequest)},hasWorkers:function(){return!!window.Worker},clearCookie:function(e,t,n){t=t||"/",n=n||"",document.cookie=e+"= ; path="+t+"; Expires=Thu, 01 Jan 1970 00:00:00 GMT; Domain="+n+";"},uniqConcat:function(e,t,n){function r(e){for(var t=0,r=e.length;r>t;t++){var a=e[t];if(a){var s=n(a);o[s]||(o[s]=1,i.push(a))}}}var i=[],o={};return r(e),r(t),i},trim:function(e){return e?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e},extDomain:function(e){var t=e.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);return t&&t[1]},getAttribute:function(e,t){var n="";return document.documentElement.hasAttribute||t!==m||(t="className"),e&&e.getAttribute&&(n=e.getAttribute(t,2)),n},isDate:function(e){return"[object Date]"===n.toString.call(e)},isArr:function(e){return"[object Array]"===n.toString.apply(e)},isStr:function(e){return"string"==typeof e},isNum:function(e){return"number"==typeof e&&isFinite(e)},isNumeric:function(e){return e-0==e&&(e+"").replace(/^\s+|\s+$/g,"").length>0},isObj:function(e){return e&&"object"==typeof e},rTN:function(e){try{if(e&&3===e.nodeType)return e.parentNode}catch(e){l(e)}return e},getTarget:function(e){var t=e.target||e.srcElement;return t&&!t.nodeName&&(t=t.correspondingUseElement&&t.correspondingUseElement.parentNode?t.correspondingUseElement.parentNode:null),this.rTN(t)},addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},rmEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},aug:function(e,t,n){if(t)for(var r in t)if(this.hasOwn(t,r)){if(n&&!n.call(null,r,t[r]))continue;e[r]=t[r]}},rmProto:function(e){return e?e.substr(0,7)===f?e.substr(7,e.length):e.substr(0,8)===p?e.substr(8,e.length):e:""},norm:function(e){return null===e?"":(e=""+e,this.trim(e.replace(d," ").replace(c,"")))},_hasClass:function(e,t){var n,r=!1;return e&&t&&(n=this.getAttribute(e,m)||"",r=t.exec?t.test(n):t&&(v+n+v).indexOf(v+t+v)>-1),r},hasClass:function(e,t){if(this.isArr(t)){for(var n=0,r=t.length;r>n;n++)if(this._hasClass(e,t[n]))return!0;return!1}return!!this.isStr(t)&&this._hasClass(e,t)},quote:function(e){var t=/["\\\x00-\x1f\x7f-\x9f]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};if(e.match(t)){return'"'+e.replace(t,function(e){var t=n[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(e%16).toString(16))})+'"'}return'"'+e+'"'},sfy:function(e){if(!e&&""!==e)return{};var t,n=typeof e;if("undefined"===n)return"undefined";if("number"===n||"boolean"===n)return""+e;if("string"===n)return this.quote(e);if("function"==typeof e.toJSON)return this.sfy(e.toJSON());if(this.isDate(e)){var r=e.getUTCMonth()+1,i=e.getUTCDate(),o=e.getUTCFullYear(),a=e.getUTCHours(),s=e.getUTCMinutes(),l=e.getUTCSeconds(),c=e.getUTCMilliseconds();return 10>r&&(r="0"+r),10>i&&(i="0"+i),10>a&&(a="0"+a),10>s&&(s="0"+s),10>l&&(l="0"+l),100>c&&(c="0"+c),10>c&&(c="0"+c),'"'+o+"-"+r+"-"+i+"T"+a+":"+s+":"+l+"."+c+'Z"'}if(t=[],this.isArr(e)){for(var u=0,d=e.length;d>u;u++)t.push(this.sfy(e[u]));return"["+t.join(",")+"]"}if("object"===n){for(var f in e)if(this.hasOwn(e,f)){var p=typeof f,m=null;if("string"===p)m=this.quote(f);else{if("number"!==p)continue;m='"'+f+'"'}if("function"!=(p=typeof e[f])&&"undefined"!==p){var v="";v=null===e[f]?'""':0===e[f]?0:this.sfy(e[f]),t.push(m+":"+v)}}return"{"+t.join(",")+"}"}},toJSON:(function(){var e=null;return function(t){return e||(e="object"==typeof JSON&&JSON.stringify&&6!==_&&7!==_&&8!==_?JSON.stringify:this.sfy),e.call(this,t)}})(),executeOnLoad:function(e){var t=!1,n=function(n){(document.addEventListener||n&&"load"===n.type||"complete"===document.readyState)&&(t=!0,r(),e.call(this))},r=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",n,!1),window.removeEventListener("load",n,!1)):(document.detachEvent("onreadystatechange",n),window.detachEvent("onload",n))};if("complete"===document.readyState)setTimeout(n);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else{document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n);var i=!1;try{i=null==window.frameElement&&document.documentElement}catch(e){}i&&i.doScroll&&(function n(){if(!t){try{i.doScroll("left")}catch(e){return setTimeout(n,50)}r(),e.call(this)}})()}},getLinkContent:function(e){for(var t,n=0,r="";(t=e.childNodes[n])&&t;n++)1===t.nodeType&&("img"===t.nodeName.toLowerCase()&&(r+=(this.getAttribute(t,"alt")||"")+" "),r+=this.getLinkContent(t));return r},fData:function(e){return this.isStr(e)?e:this.toJSON(e)},getLT:function(e,t){if(!e)return"_";var n="";return t=t.toLowerCase(),n="input"===e.nodeName.toLowerCase()?this.getAttribute(e,"value"):"text"===t?i?e.textContent:e.innerText?e.innerText:e.textContent:"href"===t?this.rmProto(this.getAttribute(e,"href")):this.getAttribute(e,t)||"",""===(n=this.norm(n))&&(n=this.norm(this.getLinkContent(e))),n&&n.length>L.MAX_VALUE_LENGTH&&(n=n.substring(0,L.MAX_VALUE_LENGTH)),""===n?"_":n},clref:function(e){if(0!==e.indexOf(f)&&0!==e.indexOf(p))return"";var t=this.strip(e);return t.clean||t.url},cold:function(){return screen?screen.colorDepth||screen.pixelDepth:"unknown"},sr:function(e){return screen?screen.width+(e||",")+screen.height:""},xy:function(e){var t=null,n=e.pageX,i=e.pageY;return r&&(t=(function(){var e=document.documentElement,t=document.body;return e&&(e.scrollTop||e.scrollLeft)?[e.scrollTop,e.scrollLeft]:t?[t.scrollTop,t.scrollLeft]:[0,0]})()),n||0===n||(n=e.clientX||0,r&&(n+=t[1])),i||0===i||(i=e.clientY||0,r&&(i+=t[0])),n+","+i},hasCC:function(e){for(var t=0,n=e.length;n>t;t++){var r=e.charCodeAt(t);if(32>r||"="===r)return!0}return!1},isValidPair:function(e,t){return!!L.in_value_whitelist(e)||(!(e.length<=0||e.length>32||t.length>L.MAX_VALUE_LENGTH)||(L.ldbg&&console.warn("Invalid key/value pair ("+e+"="+t+") Size must be 1-32 & 0-300 respectively."),!1))},ser:function(e,t){if(!e)return"";void 0===typeof t&&(t=!0);var n=[],r="";for(var i in e)if(this.hasOwn(e,i)){var o=i,a=e[i];if(null===o||null===a)continue;if(o+="",(a+="")&&!L.in_value_whitelist(o)&&a.length>L.MAX_VALUE_LENGTH&&(a=a.substring(0,L.MAX_VALUE_LENGTH)),!this.isValidPair(o,a))continue;if(!this.hasCC(o)&&!this.hasCC(a)){r="",""!==(a=this.trim(a))&&" "!==a||!t||(a="_");try{r=(r=this.enc(o+""+a)).replace(/'/g,"%27")}catch(e){r="_ERR_ENCODE_",l(e)}n.push(r)}}return n.join(this.cd)},rand:function(){for(var e=0,t="";e++<16;){var n=Math.floor(62*Math.random());t+=10>n?n:String.fromCharCode(36>n?n+55:n+61)}return t},tms:function(){return+new Date},cookEn:function(){var e=navigator.cookieEnabled?1:0,t="rapidtc";return void 0!==navigator.cookieEnabled||e||(document.cookie=t+"=1",e=-1!=document.cookie.indexOf("testcookie"),document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"),e},isResCF:function(e){return{14:1,15:1,18:1,19:1,20:1}[e]},isTagOfInterest:function(e,t){for(var n=0,r=t.length;r>n;n++)if(e.tagName&&e.tagName.toLowerCase()==t[n].toLowerCase())return!0;return!1},samplingSuccess:function(e){return(function(e){e*=10;var t=""+(new u).getCookieByName("B");return!!t&&(0>g&&(g=(function(e){for(var t=33554467,n=0,r=e.length;r>n;n++)t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t^=e.charCodeAt(n);return 0>t&&(t&=2147483647,t+=2147483648),t})(t)%1e3),e>g)})(e)},in_value_whitelist:function(e){return!(r&&8>=_)&&-1!==L.value_len_whitelist.indexOf(e)}}}"undefined"!=typeof console&&void 0!==console.log||(console={log:function(){}}),void 0===console.error&&(console.error=console.log),void 0===console.warn&&(console.warn=console.log),t.prototype={ser:function(){return L.ser(this.map)},set:function(e,t){var n=t?L.norm(t):t;void 0!==n&&null!==n||(n=""),null!==n&&L.isStr(n)&&(n=n.replace(/\\/g,"\\\\")),!L.in_value_whitelist(e)&&n.length>L.MAX_VALUE_LENGTH&&(n=n.substring(0,L.MAX_VALUE_LENGTH)),L.isValidPair(e,n)&&(this.map[L.norm(e)]=n,this.count++)},get:function(e){return this.map[e]},getAll:function(){return this.map},absorb:function(e){if(e&&L.isObj(e))for(var t in e)L.hasOwn(e,t)&&this.set(t,e[t])},absorb_filter:function(e,t){if(e&&L.isObj(e))for(var n in e)t&&!t.call(null,n)||L.hasOwn(e,n)&&this.set(n,e[n])},getSize:function(){return this.count}},(n.prototype=new t).constructor=t,(r.prototype=new t).constructor=t,n.makeFromPP=function(e){var t=new n;return e&&t.absorb(e.getAll()),t};var O=new n,L=x(e),D=new(function(){var e={};return{addModule:function(t,n){e[L.norm(t)]=n},addModules:function(e,t){var n=L.isArr(e),r=[];n||L.isStr(e)&&(e=new Array(e),n=!0);for(var i in e)if(L.hasOwn(e,i)){var o=n?e[i]:i,a=L.trim(e[i]);if(this.exists(o))l('addModules() called with prev processed id:"'+o+'"');else{var s=y(a,o,t);s&&(this.addModule(o,s),r.push(s))}}return r},getModules:function(){return e},getModulesWithViewability:function(){var t={};for(var n in e){var r=e[n];r.useViewability&&(t[n]=r)}return t},reevaluateModuleViewability:function(){var e=this.getModulesWithViewability();for(var t in e)e[t].reevaluateViewableLinks()},refreshModule:function(t,n,r,i){var o=e[L.norm(t)];o?o.refreshModule(t,n,r,i):l("refreshModule called on unknown section: "+o)},removeModule:function(t){var n=e[L.norm(t)];n&&(n.removeHandlers(),delete e[t])},destroy:function(){for(var t in e)L.hasOwn(e,t)&&this.removeModule(t);e={}},exists:function(t){return e[L.norm(t)]}}}),M={none:0,gzip:1,lzw:2,deflate:3};u.prototype={getCookieByName:function(e){return this.cookieMap[e]},getRxx:function(){var e=this.cookieMap.rxx;if(P.fpc&&(void 0===e||null===e||""===e)){var t=document.domain||"";t="."+t.split(".").slice(-2).join(".");var n=Date.UTC(2015,7,1),r=(new Date).getTime()-n;f("rxx",e=parseInt(Math.random().toString().substring(2)).toString(36)+"."+r.toString(36)+"&v=1",31536e3,t)}return e},extendBCookie:function(){var e=this.cookieMap.B;e?f("B",e,31536e3,".yahoo.com"):s("Bcookie not set")}};var P=o(e),I=(function(){function e(e,t){P.ldbg&&c(e);var n=new Image,r=null;n.onload=n.onabort=n.onerror=function(){t&&"function"==typeof t&&(clearTimeout(r),t.call(null))},n.src=e,t&&"function"==typeof t&&(r=setTimeout(function(){t.call(null)},P.click_timeout)),setTimeout(function(){n=null},1e7)}function t(){return"rapid_if_"+L.rand()}function r(e){var t="display:none;";!L.isIE||6!==L.ieV&&7!==L.ieV&&8!==L.ieV?L.sa(e,"style",t):e.style.setAttribute("cssText",t,0)}function i(e){var t=null;if(L.isIE&&L.ieV<=8){var n="";L.isSecure()&&6==L.ieV&&(n='src="https://geo.yahoo.com/b.html"'),
t=document.createElement("<iframe "+n+' name="'+e+'"></iframe>')}else t=document.createElement("iframe");return t.name=e,t}function o(e,n){var o=null,s=L.make("form"),l=L.make("input"),u=t(),d=t(),f="application/x-www-form-urlencoded;charset=UTF-8";r(o=i(u)),r(s),s.id=d,s.method="POST",s.action=a(n),s.target=u,L.isIE&&L.ieV<=7?s.setAttribute("enctype",f):(s.setAttribute("enctype",f),s.setAttribute("encoding",f)),l.name="q",l.value=e,L.isIE&&L.ieV>=10&&(l.type="submit"),s.appendChild(l);var p="load",m=function(){var e="";P.ldbg&&(!L.isIE||L.ieV>=9)&&(e=(o.contentDocument||o.contentWindow.document).body.innerHTML),L.rmEvent(o,p,m),setTimeout(function(){L.rmBodyEl(o),L.rmBodyEl(s)},0),P.ldbg&&c("iframe resp: "+e),L.isIE&&L.ieV<=7&&setTimeout(function(){var e=i("");L.addEvent(e,"load",function(){L.rmBodyEl(e)}),L.appBodyEl(e)},1)};L.addEvent(o,p,m),L.appBodyEl(o),L.appBodyEl(s),s.submit()}function a(e){var t=P.deb,n=L.rand(),r=["http:"===window.location.protocol?"http://":"https://",P.yql_host,P.yql_path,"?yhlVer=2&yhlClient=rapid&yhlS=",P.spaceid,!0===t?"&yhlEnv=staging":"",!0===t||P.ldbg?"&debug=true&diagnostics=true":"",L.isIE&&L.ieV?"&yhlUA=ie"+L.ieV:"",L.isIE&&8==L.ieV?"&format=json":"","&yhlCT=2","&yhlBTMS=",(new Date).valueOf(),"&yhlClientVer=",P.version,"&yhlRnd=",n,"&yhlCompressed=",e||0,P.gen_bcookie?"&yhlBcookie=1":""].join("");return P.ldbg&&c(r),r}function u(t){e(A("p",new n(t),1197799914))}function f(e,t){var n=a(t);try{var r=L.getXHR();r.open("POST",n,!0),r.withCredentials=!0,r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),P.ldbg&&(r.onreadystatechange=function(){4===r.readyState&&c(r.status+":xhr response: "+r.responseText)}),r.send(e)}catch(e){u({_err_nm:"sendToYQL Failed",_err_msg:"sendToYQL Failed",_err_rs:String(e),_err_st:e.stack,urlUsed:n})}}function p(e,t,n){var r={};return L.isObj(e)?(L.aug(r,e,n),r):r}function m(e,t,n){n=n||{};var r={m:L.norm(e.moduleName),l:[]};e.moduleYLK&&(r.ylk=e.moduleYLK.getAll());for(var i=r.ylk&&r.ylk.sec?r.ylk.sec:"",o=e.links,a=function(e,n){var o="_p"===e;return!(!t||!o)||"sec"==e&&n!=r.m&&n!=i||"sec"!==e&&!o},s=0,l=(o=e.links).length;l>s;s++)o[s]&&(!P.viewability||o[s].viewable?r.l.push(p(o[s].data,0,a)):P.ldbg&&c("Skipping not viewable link: "+o[s].data.slk));return r}function v(e,t,n){var r=[],i=null;for(var o in e)if(L.hasOwn(e,o)&&(i=e[o])){var a=m(i,t,n);a.l.length>0?r.push(a):P.ldbg&&c('Not capturing 0 links mod: "'+i.moduleName+'"')}return r}function g(e,t,n,r,i){var o;return o=H?X:d(),[{t:(function(e,n){return t?"pv":n&&n.event?n.event.type.getYQLID():"lv"})(0,i),s:P.spaceid,pp:_(t,r).getAll(),_ts:o.ts,_ms:o.ms,lv:v(e,n,i)}]}function _(e,t){var r=n.makeFromPP(P.keys);return r.absorb(t),e&&r.set("A_",1),r}function h(e,t,n){var r="select * from x where a = '"+e+"'";return(t?"q=":"")+(n?L.enc(r):r)}function w(e){var t={bp:S().getAll(),r:e.call(0),yrid:P.yrid,optout:P.oo,nol:P.nol};return L.toJSON(t)}function y(e,t,n,r){k(w(function(){return g(e,t,!0,n,r)}))}function b(e){return e.identifier}function k(e){function t(e,t){0===t&&(e=e.replace(/'/g,"\\'")),r&&c("body: "+e),L.hasCORS()?(i=h(e,!0,!0),f(i,t)):(i=h(e,0,0),o(i,t))}function n(){u||(u=!0,t(e,0),r&&c("sent in failSend"))}var r=P.ldbg,i="",a=M[P.compr_type];if(P.compr_on&&L.hasWorkers()&&a>1&&e.length>2048){r&&c("Looking for worker:"+P.webworker_file+", compr timeout:"+P.compr_timeout);try{var l=new Worker(P.webworker_file),u=!1,d=null,p=0;l.onerror=function(e){clearTimeout(d),n(),s(e.message),l.terminate()},l.onmessage=function(i){clearTimeout(d);var o=L.tms();"Decompress fail"!==i.data&&"Compress fail"!==i.data&&0!=i.data.indexOf("error:")||(r&&c(i.data),n()),u||(u=!0,t(i.data,a)),r&&c("Ratio ("+i.data.length+"/"+e.length+"): "+(100*i.data.length/e.length).toFixed(2)+"% -> C_T: "+(o-p)+" ms ("+o+"-"+p+")"),l.terminate()},r&&c("posting to worker: "+e),p=L.tms(),l.postMessage({type:a,json:e}),d=setTimeout(function(){n(),l.terminate()},P.compr_timeout)}catch(n){r&&c("compression worker exception "+n),t(e,0)}}else t(e,0)}function A(e,t,n){return("http:"===window.location.protocol?"http://":"https://")+C+"/"+e+["?s="+(n||P.spaceid),"t="+L.rand()+","+Math.random(),"_I="+P.yrid,"_AO="+P.oo,"_NOL="+P.nol,"_R="+L.enc(P.getReferrer()),("c"===e?"_K=":"_P=")+E(t)].join("&")}function E(e){var t=new n(S(!1).getAll());t.absorb(P.keys.getAll()),e&&(e instanceof n?t.absorb(e.getAll()):l("Internal error in buildGeoPP: not PP type"));var r;return r="dwell,start"===t.get("etag")?X:"dwell,stop"===t.get("etag")?G:d(),t.set("_ts",r.ts),t.set("_ms",r.ms),P.version+"%05"+t.ser()}function T(e){return[A("c",new n(e.pp))+"&_C="+L.ser(e.data)].join("&")}var C=YAHOO.i13n.beacon_server||"geo.yahoo.com",S=function(e){var t=new n;t.set("_pl",1),t.set("A_v",P.version);var r=P.getReferrer();if(r&&!1!==e&&t.set("_R",r.substring(0,L.MAX_VALUE_LENGTH)),P.test_id&&t.set("test",P.test_id),P.ex&&t.set("_ex",1),t.get("_bt")||t.set("_bt","rapid"),P.query_parameters){var i=/^(test|outcm|etrg|usergenf|etag|sec|slk|tar|tar_uri|yhldebug|tsrc|action)$|^(A_|_)/,o=document.location.search;if(o){o=(o=o.substring(1)).split("&");for(var a in o)if(o.hasOwnProperty(a)){var s=o[a].split("=");if(s.length>=2){var l=decodeURIComponent(s[0]),u=decodeURIComponent(s[1]),d=!i.test(l);c("Queryparams decoded: "+l+" : "+u),c("Blacklist filter: "+d),d&&t.set(l,u)}}}}var f=window.location.protocol||"";f=f.replace(/:$/,""),t.set("A_pr",f);var p=(new Date).getTimezoneOffset();return p=p?-1*p/60:0,t.set("A_tzoff",p),t},x=(function(){var e=null,t=[],n=0,r=P.addmod_timeout;return function(i,o,a,s){clearTimeout(e);var l=+new Date-n;if(t=L.uniqConcat(t,i,b),l>r)n=+new Date,y(t,o,a,s),t=[];else{var u=r-l;e=setTimeout(function(){P.ldbg&&c("queueing send in addMods"),y(t,o,a,s),t=[]},u)}}})();return{sendGeoT:function(t){e(["http:"===window.location.protocol?"http://":"https://",C,"/t?",t].join(""))},sendGeoPV:function(){e(A("b"))},sendRapidNoDelay:function(t,r,i,o,a){if(r&&H&&H.start_dwell()&&(i.etag="dwell,start",i.usergenf=1,i.A_prets=G?G.ts:null,i.A_prems=G?G.ms:null),!P.yql_enabled||a){var s=null;i&&(s=new n(i)),e(A(r?"b":"p",s))}else y(t,r,i,o)},sendRapid:function(e,t,n,r){t&&H&&H.start_dwell()&&(n.etag="dwell,start",n.usergenf=1,n.A_prets=G?G.ts:null,n.A_prems=G?G.ms:null),x(e,t,n,r)},sendRefreshedContent:function(e,t,n){var r={};n.event&&L.aug(r,n.event.data),n.pp&&L.aug(r,n.pp),k(w(function(){return g([e],t,!0,r,n)}))},sendULTEvent:function(t,r){var i={};t&&t.data&&(i=t.data);var o=A("p",new n(i),r||0);t.type&&(o+="&_V="+t.type.spaceidPrefix),e(o)},sendEvents:function(e,t){P.USE_RAPID&&this.sendULTEvent(e)},sendClick:function(t,n){var r=null,i="",o=!1;return P.USE_RAPID&&(i=T(t)),P.async_all_clicks||!t.synch?void(i&&e(i,n)):(L.prevDef(t.event),r=function(){if(!o){if(o=!0,n)return void n.call();var e=t.targetElement.href;if(P.click_postmsg.origin){var r=P.click_postmsg.window||top,i=P.click_postmsg.payload||{};i.href=e,r.postMessage(L.toJSON(i),P.click_postmsg.origin)}else t.hasTargetTop?top.document.location=e:document.location=e}},void(P.USE_RAPID&&e(i,r)))}}})(),N=null,R=null,H=null,V=null,U=new u,Y=U.getRxx();null!=Y&&O.set("_rx",Y);var q=U.getCookieByName("_ga");null!=q&&O.set("_ga",q);var B=U.getCookieByName("yx");null!=B&&O.set("_yx",B);var j=((function(){var e={}})(),0),X=null,G=null;!(function(){P.dwell_on&&(H=new E),(function(){if(P.ult_token_capture&&!0!==YAHOO.i13n.__handled_ult_tokens__){YAHOO.i13n.__handled_ult_tokens__=!0;var e=P.loc;if(e.match(/;_yl[a-z]{1}=/))P.ldbg&&c("Found ULT Token on URL."),I.sendGeoT(e);else{var t=(new u).getCookieByName("D");t&&(L.clearCookie("D","/",".yahoo.com"),I.sendGeoT(t))}}})(),P.ldbg&&c("tracked_mods: "+L.fData(P.tracked_mods));var e=D.addModules(P.tracked_mods,!1),t=D.addModules(P.tracked_mods_viewability,P.viewability);P.USE_RAPID&&P.pageview_on_init&&I.sendRapidNoDelay(e.concat(t),1==P.client_only),P.prerender&&(function(){if("prerender"==document.visibilityState){var e=g(0,"prerender",{etrg:"prerender",outcm:"page",usergenf:0,etag:"prerender"},"");I.sendEvents(e)}})(),L.executeOnLoad(function(){R=new(function(){var e=null,t=(new Date).getTime(),n=t,r=L.getScrollY(),i=-1,o=function(){var e=L.getScrollY(),t=-1===i?e-r:e-i;Math.abs(t)>P.viewability_px&&(D.reevaluateModuleViewability(),i=e,n=(new Date).getTime())},a=function(){null!=e&&clearTimeout(e);var i=(new Date).getTime();i-t<P.viewability_time&&(r=L.getScrollY(),n=i),e=setTimeout(function(){o()},P.viewability_time)};L.addEvent(window,"scroll",a),this.reInit=function(){r=L.getScrollY(),i=-1,t=n=(new Date).getTime()},this.destroy=function(){L.rmEvent(window,"scroll",a)}}),P.apv&&(N=new A),T(),_initTimeStamp=null,P.extendbcookie&&U.extendBCookie()})})();var W={utils:L};return{init:function(){},beaconEvent:function(e,t,n,r){k(e,t,n,r)},beaconClick:function(e,t,n,r,i,o,a){P.ldbg&&c("beaconClick: sec="+e+" slk="+t+" callback="+o),!r&&i&&(r={});var s={};if(i&&(r.outcm=i,s.outcm=i),a&&a.pp&&L.aug(s,a.pp),a&&a.dwell&&P.dwell_on){var l=a.dwell;"start"!==l&&"stop"!==l||("start"===l?H.start_dwell()&&(s.etag="dwell,"+l,s.usergenf=1,s.A_prets=G?G.ts:null,s.A_prems=G?G.ms:null):H.stop_dwell()&&(s.etag="dwell,"+l,s.usergenf=1,s.A_prets=X?X.ts:null,s.A_prems=X?X.ms:null))}var u=(function(e,t,n,r,i){var o={};return L.aug(o,r),o.sec=e,o.slk=t,o._p=n,{data:o,outcome:i,event:null,moduleElement:null,targetElement:null,synch:!1,hasTargetTop:!1}})(e,t,n,r,i);u.pp=s,I.sendClick(u,o)},addModules:function(e,t,n){P.ldbg&&c("addModules() called: mods="+L.fData(e)+" isPage: "+t);var r={A_am:1};(n=n||{}).pp&&L.aug(r,n.pp),n.useViewability=n.useViewability||!1,n.clickonly=n.clickonly||!1;var i=!1;switch(t||(t=!!n.useViewability&&2),t){case 1:case"1":case!0:t=!0,i=!0;break;case 2:case"2":!0,t=!1,n.event=g("contentmodification","",{});break;case 0:case"0":case!1:default:t=!1}if(P.yql_enabled){n&&n.event&&t&&(l("Cannot track event type and pageview at same time."),n.event=null);var o=D.addModules(e,n.useViewability);(0!==o.length||n.event)&&(n.clickonly&&(o=[]),(P.USE_RAPID||n.event)&&(t||n.event||n.pp?(i&&!P.persist_asid&&a(),n.event&&n.event.data&&L.aug(r,n.event.data),I.sendRapidNoDelay(o,t,r,n)):o.length>0&&I.sendRapid(o,t,r,n)),!0===t&&P.apv&&N&&N.reInit())}else t?b(r,i):n.event&&this.beaconRichView(r,n.event.outcome)},addModulesWithViewability:function(e,t,n){(n=n||{}).useViewability=P.viewability,this.addModules(e,t,n)},refreshModule:function(e,t,n,r){P.ldbg&&c("refreshModule called: mod="+e+" isPV: "+t+" sendLinks: "+n+" options: "+L.fData(r));var i=!1;switch(r=r||{},t||(t=!1),t){case 1:case"1":case!0:t=!0,i=!0;break;case 2:case"2":!0,t=!1,r.event=g("contentmodification","",{});break;case 0:case"0":case!1:default:t=!1}if(P.yql_enabled){var o=!1!==n;i&&!P.persist_asid&&a(),t&&r&&r.event&&(r.event=null),D.refreshModule(e,t,o,r)}else{var s=r.pp||{};t?b(s,i):r.event&&this.beaconRichView(s,r.event.outcome)}},removeModule:function(e){D.removeModule(e)},isModuleTracked:function(e){return P.ldbg&&c("isTracked called: "+e),D&&void 0!==D.exists(e)},destroy:function(){c("destroy called"),D.destroy(),N&&(N.destroy(),N=null),R&&(R.destroy(),R=null),H&&(H.destroy(),H=null)},reInit:function(e){if(P.ldbg&&c("reInit called with: "+L.fData(e)),(e=e||{}).spaceid){O=new n,P=o(e),L=x(e);var t=new u,r=t.getRxx();null!=r&&O.set("_rx",r);var i=t.getCookieByName("_ga");null!=i&&O.set("_ga",i);var a=t.getCookieByName("yx");null!=a&&O.set("_yx",a)}else l("Invalid spid in reInit config: "+L.fData(e))},setRapidAttribute:function(e){e.keys&&P.keys.absorb(e.keys),e.spaceid&&(P.spaceid=e.spaceid),e.referrer&&(P.referrer=e.referrer.substring(0,L.MAX_VALUE_LENGTH)),e.A_sid&&(P.keys.set("A_sid",e.A_sid),P.persist_asid=!0),e.location&&(P.loc=e.location,P.keys.set("_w",L.rmProto(e.location).substring(0,L.MAX_VALUE_LENGTH))),L.hasOwn(e,"apv")&&(e.apv?N?N.reInit():N=new A:N&&(N.destroy(),N=null))},clearRapidAttribute:function(e){for(var t in e)if("keys"===e[t]){var r=P.keys.get("_w"),i=P.keys.get("A_sid");P.keys=new n,P.keys.set("_w",r),P.keys.set("A_sid",i)}else"referrer"===e[t]?P.referrer="":"A_sid"===e[t]?(P.keys.set("A_sid",""),P.persist_asid=!0):"location"===e[t]&&(P.loc="",P.keys.set("_w",""))},beaconPageview:function(e){b(e,!0)},beaconECommerce:function(e,t){},beaconInternalSearch:function(e,t){},getCurrentSID:function(){return O.get("A_sid")},notifyHistoryPushStateCalled:function(){},beaconLinkViews:function(e,t,n,i){P.ldbg&&c("beaconLinkViews() called");var o={};(n=n||{}).pp&&L.aug(o,n.pp);var a=!1;switch(t){case 1:case"1":case!0:a=!0;break;case 2:case"2":!0,a=!1,n.event=g("contentmodification","",{});break;case 0:case"0":case!1:default:a=!1}if(P.yql_enabled){if(n&&n.event&&a&&(l("Cannot track event type and pageview at same time."),n.event=null),0!==e.length||n.event){for(var s=[],u=0;u<e.length;u++){var d=e[u],f=new r;f.absorb_filter(d,function(e){return"sec"!=e&&"_links"!=e});for(var p=[],m=1,v=0;v<d._links.length;v++){var _=d._links[v],h={viewable:!0,data:{sec:d.sec,_p:m++,A_lv:2}};L.aug(h.data,_),p.push(h)}var w={moduleName:d.sec,moduleYLK:f,links:p,identifier:d.sec};s.push(w)}(P.USE_RAPID||n.event)&&((a||n.event||n.pp)&&n.event&&n.event.data&&L.aug(o,n.event.data),I.sendRapidNoDelay(s,a,o,n)),i&&i.call()}}else a?b(o,!1):n.event&&this.beaconRichView(o,n.event.outcome)},beaconPerformanceData:function(e,t){T(e,t)},__test_only__:function(){return W}}},YUI.add("rapid",function(e,t){var n,r=require("hermes-core/flog")("rapid"),i={debug:!1,trackedElements:["content"]};e.rapidTracker={ok:!1,_queuedEvents:[],init:function(t){var r,i,o;if(!e.rapidTracker.ok)try{for((n=new YAHOO.i13n.Rapid(t)).init(),e.mix(this,n),r=0,i=this._queuedEvents.length;r<i;r++)"beaconClick"===(o=this._queuedEvents.shift()).eventType?this.beaconClick(o.view,o.action,-1,o.keys,o.outcome):"beaconPerformanceData"===o.eventType?this.beaconPerformanceData(o.obj):"beaconEvent"===o.eventType&&this.beaconEvent(o.eventName,o.pageParams);e.rapidTracker.ok=!0}catch(t){e.rapidTracker.ok=!1}},destroy:function(){e.rapidTracker.ok&&(n&&n.destroy(),e.rapidTracker.ok=!1)},getConf:function(t,n,o){var a,s,l="",c={},u=n.getUA(),d=n.getViewer(),f=["signed_out_home_page_no_scroll","enable_personalized_group_recommendations"];return o=o||{},o.trackedElements=o.trackedElements||[],a=e.merge(i,t.get("rapidConf")||{},o),a.trackedElements=i.trackedElements.concat(t.get("trackedElementIDs"),o.trackedElements),n.buckets&&(l=Object.keys(n.buckets).reduce(function(e,t){return-1!==f.indexOf(t)?e+t+":"+n.buckets[t]+",":e},"").slice(0,-1)).length>300&&(r.warn("Rapid bucket data exceeded the 300 character limit."),l=l.substr(0,300)),c=e.QueryString.parse(window.location.search.replace("?","")),s=e.merge({pageType:t.name,intl:n.lang,bx:n.getCookie("BX"),buckets:l,isStaff:d&&d.isInsecureGod?1:0,renderer:n.hasClientSideRouted()?"c":"s",loggedIn:d&&d.signedIn?1:0,slice:n.slice,groupUsr:n.auth&&n.auth.activeGroupMembership?1:0,density:window.devicePixelRatio||1,dimensns:"innerWidth"in window?window.innerWidth+"x"+window.innerHeight:"unknown",isPro:0,isbot:u.isBot,isunsptd:u.isUnsupportedBrowser||u.isReallyUnsupportedBrowser,campaignID:decodeURIComponent(c.campaignID)||"",linkID:decodeURIComponent(c.linkID)||""},t.getTrackingSegments()),new e.Promise(function(r,i){var o,l=s.isunsptd&&t.get("isPanda")?"p#"+t.get("spaceid"):t.get("spaceid"),c=e.config.flickr.performance_samples[t.name.replace(/-/g,"_")];c?c.signedIn&&(c=c[d&&d.signedIn?"signedIn":"signedOut"]||0):c=0,c*=100,o={debug:a.debug,spaceid:l,client_only:a.client_only||1,compr_on:!1,tracked_mods:a.trackedElements,async_all_clicks:!0,lt_attr:"data-track",keys:s,perf_navigationtime:2,sample:{perf_navigationtime:c}},a.ex&&(o.ex=!0),void 0!==a.oo&&(o.oo=a.oo),d.signedIn?n.getModel("person-models",d.nsid).then(function(e){o.keys.joindate=e.getValue("dateCreated").format("YYYY-MM-DD"),o.keys.isPro=e.getValue("isPro")?1:0,r(o)}):r(o)})},beacon:function(e,t,r,i){r=r||{},i=i||"",n?n.beaconClick(e,t,-1,r,i):this._queuedEvents.push({eventType:"beaconClick",view:e,action:t,keys:r,outcome:i})},beaconPerformanceData:function(e){n?n.beaconPerformanceData(e):this._queuedEvents.push({eventType:"beaconPerformanceData",obj:e})},beaconEvent:function(e,t){n?n.beaconEvent(e,t):this._queuedEvents.push({eventType:"beaconEvent",eventName:e,pageParams:t})},refreshTracker:function(){n&&e.rapidTracker.ok&&n.refreshModule(i.trackedElements[0],!1,!1,{})},beaconScroll:function(t){t.registerEventHandler(e.globalEvents.subscribe("window:scroll",function(n){t.verticalScrollTimer&&clearTimeout(t.verticalScrollTimer),t.verticalScrollTimer=setTimeout(function(){e.rapidTracker.beaconEvent("verticalScroll",{view:t.name,scrollY:window.pageYOffset,scrollTo:e.rapidTracker.getScrollSection(t,window.innerWidth/2,window.innerHeight/2)})},750)}))},getScrollSection:function(t,n,r){var i=e.one(document.elementFromPoint(n,r)),o=i.ancestor("[data-scroll-section]",!0);if(o)return o.getAttribute("data-scroll-section");var a,s=i.ancestor(".view",!0);if(s){if((a=s.getAttribute("class").match(/[\S]+-view/)[0])===t.name&&n===window.innerWidth/2){var l=e.rapidTracker.getScrollSection(t,n/2,r);return l!==t.name?l:e.rapidTracker.getScrollSection(t,n+n/2,r)}return a}}}},"@VERSION@",{affinity:"client",requires:["querystring-parse-simple","global-events"]});YUI.add("storage-helper",function(e){e.StorageHelper={setItem:function(t,i,n){var o=n?"sessionStorage":"localStorage";if(e.config.win)try{e.config.win[o][t]=i}catch(e){}},getItem:function(t,i){var n,o=i?"sessionStorage":"localStorage";if(e.config.win)try{n=e.config.win[o][t]}catch(e){}return n},remove:function(t,i){var n=i?"sessionStorage":"localStorage";if(e.config.win)try{e.config.win[n].removeItem(t)}catch(e){}},hasEntries:function(t,i){var n=i?"sessionStorage":"localStorage",o=!1;if(e.config.win)try{o=void 0!==e.config.win[n][t]}catch(e){}return o},isLocalStorageAvailable:function(){var t="checkLSCompat",i=!1;try{e.config.win.localStorage[t]="checkLSCompatValue",e.config.win.localStorage.removeItem(t),i=!0}catch(e){i=!1}return i}},e.Storage={Instance:{_cache:{},_hasSessionStorage:!0,_clientIdKey:"",getClientIdKey:function(){return this._clientIdKey||(this._clientIdKey=e.config.win.appContext.clientId+"_"),this._clientIdKey},get:function(t){var i,n;try{t=t||"",i=this.getClientIdKey()+t,n=this._hasSessionStorage?e.config.win.sessionStorage.getItem(i):this._cache[i]}catch(e){this._hasSessionStorage=!1}return n},set:function(t,i){var n;try{t&&(n=this.getClientIdKey()+t,this._hasSessionStorage?e.config.win.sessionStorage.setItem(n,i):this._cache[n]=i)}catch(e){this._cache[n]=i,this._hasSessionStorage=!1}},has:function(t){var i,n=!1;try{i=this.getClientIdKey()+t,n=this._hasSessionStorage?!!e.config.win.sessionStorage.getItem(i):!!this._cache[i]}catch(e){this._hasSessionStorage=!1}return n},remove:function(t){var i;try{t=t||"",i=this.getClientIdKey()+t,this._hasSessionStorage?e.config.win.sessionStorage.removeItem(i):this._cache[i]=void 0}catch(e){this._hasSessionStorage=!1}},clear:function(){this.clearByKey(this.getClientIdKey())},clearByKey:function(t){var i,n,o,s=[];try{if(t)if(this._hasSessionStorage){for(i=0,o=e.config.win.sessionStorage.length;i<o;i++)(n=e.config.win.sessionStorage.key(i))&&0===n.indexOf(t)&&s.push(n);for(i=0,o=s.length;i<o;i++)e.config.win.sessionStorage.removeItem(s[i])}else for(e.Object.each(this._cache,function(e,i){0===i.indexOf(t)&&s.push(i)}),i=0,o=s.length;i<o;i++)this._cache[s[i]]=void 0}catch(e){this._hasSessionStorage=!1}}}}},"@VERSION@",{requires:[]});YUI.add("keyboard-manager",function(e){var t;(e.KeyboardManager=function(){var t=this;this.keyEventScope=["*"],e.on("flickr:setKeyEventScope",function(e){t.setCurrentKeyEventScope(e)}),e.on("flickr:removeKeyEventScope",function(e){t.removeCurrentKeyEventScope(e)})}).prototype={on:function(t,n,r){return void 0===r&&(r=n,n=null),e.one("doc").on("key",this.handleKey.bind(this,r,n),t)},handleKey:function(e,n,r){if(!(r.metaKey||r.altKey||r.shiftKey||r.ctrlKey||this.inputHasFocus())){var i=t.get(r,"keyEventScope");i||(i=this.getCurrentKeyEventScope(),t.add(r,{keyEventScope:i})),"*"!==n&&n!==i||e(r)}},inputHasFocus:function(){var t,n;try{t=e.one(document.activeElement)}catch(e){return!1}return!!t&&("INPUT"===(n=t.get("tagName").toUpperCase())?/^text|search|tel|url|email|password|datetime|date|month|week|time|datetime-local|number|range|color$/i.test(t.get("type")):"TEXTAREA"===n||"SELECT"===n||(t.getAttribute("contenteditable")||!1))},setCurrentKeyEventScope:function(e){var t=this.keyEventScope.indexOf(e);-1===t?this.keyEventScope.push(e):this.keyEventScope=this.keyEventScope.slice(0,t+1)},getCurrentKeyEventScope:function(){return this.keyEventScope.slice(-1)[0]},getKeyEventScopeStack:function(){return this.keyEventScope},removeCurrentKeyEventScope:function(e){var t=this.keyEventScope.indexOf(e);t>-1&&(this.keyEventScope=this.keyEventScope.slice(0,t))},resetCurrentKeyEventScope:function(e){this.keyEventScope=["*"]}},t=(function(){function t(e){var t;switch(e.type){case"key":t=e.which+e.pageX+e.pageY;break;default:t=e.type+e.pageX+e.pageY}return t}function n(e){delete r[e]}var r={};return{add:function(i,c){var o,a,u=t(i);e.Lang.isObject(i)&&e.Lang.isObject(i._event)&&e.Lang.isObject(c)&&(a=e.later(1,this,n,u),o=r[u]||{},e.mix(o,c,!0),o.timer&&o.timer.cancel(),o.timer=a,r[u]=o)},get:function(i,c){var o=t(i),a=r[o]||{};return a.timer&&a.timer.cancel(),a.timer=e.later(1,this,n,o),c?a[c]:a}}})()},"@VERSION@",{requires:["event-key"]});YUI.add("overflow-helper",function(e){e.OverflowHelper={detectScrollbarSize:function(t){var o,n=0;return YUI.Env.isServer||((o=e.Node.create("<div></div>")).setStyle("width",100).setStyle("height",100).setStyle("overflow","scroll").setStyle("position","absolute").setStyle("top",-9999),t.append(o),n=o._node.offsetWidth-o._node.clientWidth,o.remove(!0)),n},addFlowListener:function(t,o,n,i){var r,l,v,d,f="over"===o;"OverflowEvent"in window?(d=function(e){if(e.type===o+"flow"||0===e.orient&&e.horizontalOverflow===f||1===e.orient&&e.verticalOverflow===f||2===e.orient&&e.horizontalOverflow===f&&e.verticalOverflow===f)return n.call(this,e)},v=t._node.addEventListener("overflowchanged",d,!1),i({detach:function(){t._node.removeEventListener("overflowchanged",d)}})):(function(t,o){var n,i,r;YUI.Env.isServer||((n=e.Node.create("<div>test event</div>")).setStyle("height: 1px").setStyle("width","1px").setStyle("opacity",0).setStyle("position","absolute").setStyle("top",-99999).setStyle("left",-99999).setStyle("overflow","auto"),t.append(n),i=setTimeout(function(){n._node.removeEventListener("overflow",r),n.remove(!0),o(!1)},10),r=function(e){clearTimeout(i),n._node.removeEventListener("overflow",r),n.remove(!0),o(!0)},n._node.addEventListener("overflow",r,!1))})(t,function(e){e?(d=function(e){if(e.type===o+"flow"||0===e.orient&&e.horizontalOverflow===f||1===e.orient&&e.verticalOverflow===f||2===e.orient&&e.horizontalOverflow===f&&e.verticalOverflow===f)return n.call(this,e)},v=t._node.addEventListener(o+"flow",d,!1),i({detach:function(){t._node.removeEventListener(o+"flow",d)}})):(l=function(){t._node.scrollHeight>t._node.clientHeight?"over"===o&&n.call(t._node,{}):"under"===o&&n.call(t._node,{})},"MutationObserver"in window?((r=new MutationObserver(function(e){e.some(function(e){return l(),!0})})).observe(t._node,{attributes:!1,subtree:!0,childList:!0}),i({detach:function(){r.disconnect()}})):"MutationEvent"in window&&(d=function(e){setTimeout(function(){l()},10)},v=t._node.addEventListener("DOMSubtreeModified",d,!1),i({detach:function(){t._node.removeEventListener("DOMSubtreeModified",d)}})))})}}},"@VERSION@",{requires:[]});YUI.add("priority-queue",function(t,e){var o,r;t.PriorityQueue=o=function(t){this._comp=t||r,this._elts=[]},r=function(t,o){var r=typeof t,i=typeof o;if("number"===r&&"number"===i)return t-o;if("string"!==r||"string"!==i)throw new Error("["+e+"] can't sort items of type "+r+" and "+i);return t===o?0:t>o?1:void 0},o.prototype.size=function(){return this._elts.length},o.prototype.isEmpty=function(){return 0===this._elts.length},o.prototype.push=function(){var t=Array.prototype.slice.call(arguments);1===t.length?this._elts.push(t[0]):this._elts=this._elts.concat(t),this.sort()},o.prototype.pop=function(){return this._elts.pop()},o.prototype.peek=function(){return this._elts[this._elts.length-1]},o.prototype.sort=function(t){t&&(this._comp=t),this._elts.sort(this._comp)},o.prototype.clear=function(t){this._elts=[]},o.prototype.map=function(t){return this._elts.map(t)}},"@VERSION@",{requires:[]});YUI.add("defer-images",function(t,e){function n(){b||(f=new Array(l),s=new t.PriorityQueue(function(t,e){return i(m,e)-i(m,t)}),h=!0,u(),r(),a(),t.globalEvents.subscribe("window:scroll",function(){u(),s.sort()}),b=!0)}function r(){var e=[];(c=t.all(w)).each(function(t,n){var r=t.getXY();e.push({x:r[0],y:r[1],url:t.getAttribute(d),node:t,errorCount:0})}),s.push.apply(s,e)}function a(){var t,e,n;if(h)for(t=0;t<l;t++)(e=f[t])&&!e.complete||(n=s.pop())&&(f[t]=e={task:n,complete:!1},o(e))}function o(t){var e=new Image,n=function(t){var e=t.task.node;switch(e.get("tagName").toLowerCase()){case"img":e.setAttribute("src",t.task.url);break;case"video":e.setAttribute("poster",t.task.url);break;default:e.setStyle("backgroundImage","url("+t.task.url+")")}e.setAttribute(d,g),t.complete=!0,a()}.bind(this,t);e.onload=n,e.onerror=function(){var e;t.task.errorCount++,t.task.errorCount>p?(e=/[a-f0-9]+(_[a-z]{1,2})?\.[a-z]{3,4}$/.exec(t.task.url),t.task.url="https://s.yimg.com/pw/images/"+this.appContext.lang.toLowerCase()+"/photo_unavailable"+(e[1]?e[1]:"")+".png",n()):o(t)},e.src=t.task.url,e.complete&&n()}function i(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function u(){m={x:t.config.win.pageXOffset+t.config.win.innerWidth/2,y:t.config.win.pageYOffset+t.config.win.innerHeight/2}}var s,c,f,l=4,p=3,g="loaded",d="data-defer-src",w="["+d+"]:not(["+d+'="'+g+'"])',m={x:0,y:0},b=!1,h=!1;t.DeferImages={init:n,update:function(){b?(s.clear(),r(),a()):n()},pause:function(){h=!1},resume:function(){h=!0,a()}}},"@VERSION@",{requires:["priority-queue","app-context","global-events"]});YUI.add("accessibility",function(e,n){function t(){var n=e.one(document.activeElement);n&&n.addClass("no-outline")}function a(){var n=e.one(document.activeElement);n&&n.removeClass("no-outline")}e.Accessibility={manageFocusOutlines:function(e){e.registerEventHandler(e.get("container").on("mouseup",t)),e.registerEventHandler(e.get("container").on("focus",a))},makeDroparoundAnchorAccessible:function(e){var n,t=e.view,a=e.getDroparound,r=e.anchor,o=e.handler;t.registerEventHandler(r.on("key",function(e){e.preventDefault(),e.stopPropagation(),n=a(),"true"===e.target.get("aria-expanded")?(n&&n.close(),e.target.set("aria-expanded","false")):(o.call(t,e),n&&!n.isClosed&&e.target.set("aria-expanded","true"))},"down:13,32")),t.registerEventHandler(r.on("key",function(e){var t=!0;if(9===e.keyCode&&(t=t&&!e.shiftKey),"true"===e.target.getAttribute("aria-expanded")&&t&&(e.preventDefault(),n=a())){var r=n.get("container").one("ul[role=menu]").one("li:first-child");r&&r.focus()}},"down:40,9"))}}},"@VERSION@",{requires:[]});/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-base",function(e,t){var n="running",r="startTime",i="elapsedTime",s="start",o="tween",u="end",a="node",f="paused",l="reverse",c="iterationCount",h=Number,p={},d;e.Anim=function(){e.Anim.superclass.constructor.apply(this,arguments),e.Anim._instances[e.stamp(this)]=this},e.Anim.NAME="anim",e.Anim._instances={},e.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i,e.Anim.DEFAULT_UNIT="px",e.Anim.DEFAULT_EASING=function(e,t,n,r){return n*e/r+t},e.Anim._intervalTime=20,e.Anim.behaviors={left:{get:function(e,t){return e._getOffset(t)}}},e.Anim.behaviors.top=e.Anim.behaviors.left,e.Anim.DEFAULT_SETTER=function(t,n,r,i,s,o,u,a){var f=t._node,l=f._node,c=u(s,h(r),h(i)-h(r),o);l?"style"in l&&(n in l.style||n in e.DOM.CUSTOM_STYLES)?(a=a||"",f.setStyle(n,c+a)):"attributes"in l&&n in l.attributes?f.setAttribute(n,c):n in l&&(l[n]=c):f.set?f.set(n,c):n in f&&(f[n]=c)},e.Anim.DEFAULT_GETTER=function(t,n){var r=t._node,i=r._node,s="";return i?"style"in i&&(n in i.style||n in e.DOM.CUSTOM_STYLES)?s=r.getComputedStyle(n):"attributes"in i&&n in i.attributes?s=r.getAttribute(n):n in i&&(s=i[n]):r.get?s=r.get(n):n in r&&(s=r[n]),s},e.Anim.ATTRS={node:{setter:function(t){return t&&(typeof t=="string"||t.nodeType)&&(t=e.one(t)),this._node=t,!t,t}},duration:{value:1},easing:{value:e.Anim.DEFAULT_EASING,setter:function(t){if(typeof t=="string"&&e.Easing)return e.Easing[t]}},from:{},to:{},startTime:{value:0,readOnly:!0},elapsedTime:{value:0,readOnly:!0},running:{getter:function(){return!!p[e.stamp(this)]},value:!1,readOnly:!0},iterations:{value:1},iterationCount:{value:0,readOnly:!0},direction:{value:"normal"},paused:{readOnly:!0,value:!1},reverse:{value:!1}},e.Anim.run=function(){var t=e.Anim._instances,n;for(n in t)t[n].run&&t[n].run()},e.Anim.pause=function(){for(var t in p)p[t].pause&&p[t].pause();e.Anim._stopTimer()},e.Anim.stop=function(){for(var t in p)p[t].stop&&p[t].stop();e.Anim._stopTimer()},e.Anim._startTimer=function(){d||(d=setInterval(e.Anim._runFrame,e.Anim._intervalTime))},e.Anim._stopTimer=function(){clearInterval(d),d=0},e.Anim._runFrame=function(){var t=!0,n;for(n in p)p[n]._runFrame&&(t=!1,p[n]._runFrame());t&&e.Anim._stopTimer()},e.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var v={run:function(){return this.get(f)?this._resume():this.get(n)||this._start(),this},pause:function(){return this.get(n)&&this._pause(),this},stop:function(e){return(this.get(n)||this.get(f))&&this._end(e),this},_added:!1,_start:function(){this._set(r,new Date-this.get(i)),this._actualFrames=0,this.get(f)||this._initAnimAttr(),p[e.stamp(this)]=this,e.Anim._startTimer(),this.fire(s)},_pause:function(){this._set(r,null),this._set(f,!0),delete p[e.stamp(this)],this.fire("pause")},_resume:function(){this._set(f,!1),p[e.stamp(this)]=this,this._set(r,new Date-this.get(i)),e.Anim._startTimer(),this.fire("resume")},_end:function(t){var n=this.get("duration")*1e3;t&&this._runAttrs(n,n,this.get(l)),this._set(r,null),this._set(i,0),this._set(f,!1),delete p[e.stamp(this)],this.fire(u,{elapsed:this.get(i)})},_runFrame:function(){var e=this._runtimeAttr.duration,t=new Date-this.get(r),n=this.get(l),s=t>=e;this._runAttrs(t,e,n),this._actualFrames+=1,this._set(i,t),this.fire(o),s&&this._lastFrame()},_runAttrs:function(t,n,r){var i=this._runtimeAttr,s=e.Anim.behaviors,o=i.easing,u=n,a=!1,f,l,c;t>=n&&(a=!0),r&&(t=n-t,u=0);for(c in i)i[c].to&&(f=i[c],l=c in s&&"set"in s[c]?s[c].set:e.Anim.DEFAULT_SETTER,a?l(this,c,f.from,f.to,u,n,o,f.unit):l(this,c,f.from,f.to,t,n,o,f.unit))},_lastFrame:function(){var e=this.get("iterations"),t=this.get(c);t+=1,e==="infinite"||t<e?(this.get("direction")==="alternate"&&this.set(l,!this.get(l)),this.fire("iteration")):(t=0,this._end()),this._set(r,new Date),this._set(c,t)},_initAnimAttr:function(){var t=this.get("from")||{},n=this.get("to")||{},r={duration:this.get("duration")*1e3,easing:this.get("easing")},i=e.Anim.behaviors,s=this.get(a),o,u,f;e.each(n,function(n,a){typeof n=="function"&&(n=n.call(this,s)),u=t[a],u===undefined?u=a in i&&"get"in i[a]?i[a].get(this,a):e.Anim.DEFAULT_GETTER(this,a):typeof u=="function"&&(u=u.call(this,s));var l=e.Anim.RE_UNITS.exec(u),c=e.Anim.RE_UNITS.exec(n);u=l?l[1]:u,f=c?c[1]:n,o=c?c[2]:l?l[2]:"",!o&&e.Anim.RE_DEFAULT_UNIT.test(a)&&(o=e.Anim.DEFAULT_UNIT);if(!u||!f){e.error('invalid "from" or "to" for "'+a+'"',"Anim");return}r[a]={from:e.Lang.isObject(u)?e.clone(u):u,to:f,unit:o}},this),this._runtimeAttr=r},_getOffset:function(e){var t=this._node,n=t.getComputedStyle(e),r=e==="left"?"getX":"getY",i=e==="left"?"setX":"setY",s;return n==="auto"&&(s=t.getStyle("position"),s==="absolute"||s==="fixed"?(n=t[r](),t[i](n)):n=0),n},destructor:function(){delete e.Anim._instances[e.stamp(this)]}};e.extend(e.Anim,e.Base,v)},"3.16.0",{requires:["base-base","node-style"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-color",function(e,t){var n=Number;e.Anim.getUpdatedColorValue=function(t,r,i,s,o){return t=e.Color.re_RGB.exec(e.Color.toRGB(t)),r=e.Color.re_RGB.exec(e.Color.toRGB(r)),(!t||t.length<3||!r||r.length<3)&&e.error("invalid from or to passed to color behavior"),"rgb("+[Math.floor(o(i,n(t[1]),n(r[1])-n(t[1]),s)),Math.floor(o(i,n(t[2]),n(r[2])-n(t[2]),s)),Math.floor(o(i,n(t[3]),n(r[3])-n(t[3]),s))].join(", ")+")"},e.Anim.behaviors.color={set:function(t,n,r,i,s,o,u){t._node.setStyle(n,e.Anim.getUpdatedColorValue(r,i,s,o,u))},get:function(e,t){var n=e._node.getComputedStyle(t);return n=n==="transparent"?"rgb(255, 255, 255)":n,n}},e.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(t){e.Anim.behaviors[t]=e.Anim.behaviors.color})},"3.16.0",{requires:["anim-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-xy",function(e,t){var n=Number;e.Anim.behaviors.xy={set:function(e,t,r,i,s,o,u){e._node.setXY([u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)])},get:function(e){return e._node.getXY()}}},"3.16.0",{requires:["anim-base","node-screen"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-curve",function(e,t){e.Anim.behaviors.curve={set:function(t,n,r,i,s,o,u){r=r.slice.call(r),i=i.slice.call(i);var a=u(s,0,100,o)/100;i.unshift(r),t._node.setXY(e.Anim.getBezier(i,a))},get:function(e){return e._node.getXY()}},e.Anim.getBezier=function(e,t){var n=e.length,r=[],i,s;for(i=0;i<n;++i)r[i]=[e[i][0],e[i][1]];for(s=1;s<n;++s)for(i=0;i<n-s;++i)r[i][0]=(1-t)*r[i][0]+t*r[parseInt(i+1,10)][0],r[i][1]=(1-t)*r[i][1]+t*r[parseInt(i+1,10)][1];return[r[0][0],r[0][1]]}},"3.16.0",{requires:["anim-xy"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-easing",function(e,t){var n={easeNone:function(e,t,n,r){return n*e/r+t},easeIn:function(e,t,n,r){return n*(e/=r)*e+t},easeOut:function(e,t,n,r){return-n*(e/=r)*(e-2)+t},easeBoth:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInStrong:function(e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutStrong:function(e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeBothStrong:function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},elasticIn:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s))+t)},elasticOut:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r)===1?t+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*e)*Math.sin((e*r-o)*2*Math.PI/s)+n+t)},elasticBoth:function(e,t,n,r,i,s){var o;return e===0?t:(e/=r/2)===2?t+n:(s||(s=r*.3*1.5),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),e<1?-0.5*i*Math.pow(2,10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)+t:i*Math.pow(2,-10*(e-=1))*Math.sin((e*r-o)*2*Math.PI/s)*.5+n+t)},backIn:function(e,t,n,r,i){return i===undefined&&(i=1.70158),e===r&&(e-=.001),n*(e/=r)*e*((i+1)*e-i)+t},backOut:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),n*((e=e/r-1)*e*((i+1)*e+i)+1)+t},backBoth:function(e,t,n,r,i){return typeof i=="undefined"&&(i=1.70158),(e/=r/2)<1?n/2*e*e*(((i*=1.525)+1)*e-i)+t:n/2*((e-=2)*e*(((i*=1.525)+1)*e+i)+2)+t},bounceIn:function(t,n,r,i){return r-e.Easing.bounceOut(i-t,0,r,i)+n},bounceOut:function(e,t,n,r){return(e/=r)<1/2.75?n*7.5625*e*e+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},bounceBoth:function(t,n,r,i){return t<i/2?e.Easing.bounceIn(t*2,0,r,i)*.5+n:e.Easing.bounceOut(t*2-i,0,r,i)*.5+r*.5+n}};e.Easing=n},"3.16.0",{requires:["anim-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-node-plugin",function(e,t){var n=function(t){t=t?e.merge(t):{},t.node=t.host,n.superclass.constructor.apply(this,arguments)};n.NAME="nodefx",n.NS="fx",e.extend(n,e.Anim),e.namespace("Plugin"),e.Plugin.NodeFX=n},"3.16.0",{requires:["node-pluginhost","anim-base"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("anim-scroll",function(e,t){var n=Number;e.Anim.behaviors.scroll={set:function(e,t,r,i,s,o,u){var a=e._node,f=[u(s,n(r[0]),n(i[0])-n(r[0]),o),u(s,n(r[1]),n(i[1])-n(r[1]),o)];f[0]&&a.set("scrollLeft",f[0]),f[1]&&a.set("scrollTop",f[1])},get:function(e){var t=e._node;return[t.get("scrollLeft"),t.get("scrollTop")]}}},"3.16.0",{requires:["anim-base"]});
YUI.add("anchor-repositioner",function(n,e){require("hermes-core/flog")(e);var o=10;n.AnchorRepositioner=(function(){function e(n,e){l.push({key:n,y:e})}function i(){var e,o=n.config.win.location.hash.replace("#","");o&&(e=n.one('[id="'+o+'"], [name="'+o+'"]'))&&t(e)}function t(e){e instanceof n.Node||(e=n.one(e)),a=e}function r(e){var o,i,r;e&&t(e),a&&(a.scrollIntoView(!0),o=n.config.win.scrollY||n.config.win.pageYOffset,i=Math.ceil(a.getY()),r=l.reduce(function(n,e){return n+e.y},0),i>=o&&i<=o+r&&(s&&s.stop(),(s=new n.Anim({duration:.25,node:"win",easing:"easeOut",to:{scroll:[0,i-r]}})).on("end",function(n){s=null}),s.run()))}function c(o,i){i instanceof n.Node&&e(o,parseInt(i.getComputedStyle("height"),10))}function f(n){return l.some(function(e,o){if(e.key===n)return l.splice(o,1),!0})}var u,a,s,l=[];return u||(i(),e("default",o),n.on("hashchange",function(n){i(),r()},n.config.win),u={addOffset:c,removeOffset:f,jumpTo:r}),u})()},"@VERSION@",{requires:["node","anim"]});YUI.add("client-app",function(e,i){function n(){A=!1}function t(i){var n,t,r=window.location,a=window.history,o=!1;if(r.search&&a.replaceState&&(n=e.QueryString.parse(r.search.replace("?","")),i.forEach(function(e){e in n&&(delete n[e],o=!0)}),o)){t=e.QueryString.stringify(n);try{a.replaceState({},"",r.pathname+(t?"?"+t:""))}catch(e){}}}function r(e,i){return i.betterUse(e,i)}function a(i){var n,t,r,a,o=[],c=["flickr.photos.addView","flickr.groups.updateViewDate","flickr.photos.getPhotos","flickr.people.addView","flickr.photosets.addView"];if(m.getViewCounter().flushQueue(),m.uploadIsInProgress())a=this.intlMessage({intlName:"client-app.UPLOAD_IN_PROGRESS"});else{for(n in m.writeAPICallsMadeOnThisPage)(t=m.writeAPICallsMadeOnThisPage[n]).completed||o.push(t);o.length&&(o.every(function(e){return-1!==c.indexOf(e.methodName)})||(e.config.flickr.requestConfig&&e.config.flickr.requestConfig.auth&&e.config.flickr.requestConfig.auth.isInsecureGod?(r=o.map(function(e){return e.methodName}).join(", "),a=this.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})+" In progress API Methods: "+r):a=this.intlMessage({intlName:"client-app.SAVING_LAST_ACTIONS"})))}return e.Storage.Instance.clear(),a&&((i||window.event).returnValue=a),a}function o(i){if(!A)return window.location=i.url,void i.halt();m.setClientSideRouted(!0),m.setPreviousLocation(),m.adManager.hideAd(),m.updateModelRefetchState(i.url,i.originEvent&&i.originEvent.currentTarget&&i.originEvent.currentTarget.hasClass("do-not-evict")),m.clearWriteAPICallCache(),m.setGPCredentials(null),e.loaderBar.start(),m.clientMetrics.clearPendingMeasurements(),m.clientMetrics.start(i.details[0].url),m.adManager.isEnabled()&&m.adManager.currentlyShowingAd&&m.adManager.adIsUnloading(),m.getKeyboardManager().resetCurrentKeyEventScope(),e.Object.each(m.modelRegistries,function(e,i){e.hasWeakSubscribers&&e.removeWeakSubscribers()}),C=!0}function c(){e.UA.chrome>0&&(window.scrollTo(window.scrollX,window.scrollY+1),window.scrollTo(window.scrollX,window.scrollY-1))}function s(i){e.Object.each(m.modelRegistries,function(e,i){e.hasWeakSubscribers&&e.removeWeakSubscribers()}),e.fire("close-dialogs"),"popstate"===i.src&&c(),"popstate"!==i.src||b.hasRoute(b.getPath())||e.Object.isEmpty(i.newVal)||b.navigate(b.getPath()),m.getViewCounter().flushQueue({resetDuplicateTracking:!0}),C||m.updateModelRefetchState(),C=!1}function l(e){b.set("previousView",e.prevVal)}function u(){"de"===m.getViewer().intl&&e.use("hermes-template-agof",function(){var i,n,t=b.get("activeView");i=e.config.flickr.agof.spaceids[t.name]||e.config.flickr.agof.spaceids.default,n=e.Template.get("hermes/agof")({spaceid:i}),e.one(".agof").set("innerHTML",n),y.log("AGOF",{spaceid:i})})}function p(i,n){n=n||b.get("activeView"),e.rapidTracker.getConf(n,m,i).then(function(i){e.rapidTracker.init(i)})}function f(i,n){e.rapidTracker&&e.rapidTracker.destroy&&e.rapidTracker.destroy(),p(i,n)}function d(){var i={c1:2,c2:7241469,c3:"",c4:encodeURIComponent((function(i){var n,t=i.pathname||"",r=(t.match(/^\/photos\/([^\/]+)/)||[])[1]||null;return r&&"friends"!==r&&(n=e.murmurhash(r,r+"secret insecure salt"),t=t.replace(r,n)),e.config.flickr.url.host+t})(document.location)),c5:b.get("activeView").get("spaceid"),c6:"",c15:""};e.comscore&&e.comscore.beacon&&e.comscore.beacon(i)}function g(i){var n=this.get("activeView");if(void 0===n.getViewDataFromHistory("referrer")&&n.setViewDataOnHistory("referrer",m.getPreviousURL()),m.clientMetrics.end(),f(),d(),u(),e.DeferImages.update(),e.config.win.DARLA&&e.config.win.DARLA.event&&"function"==typeof e.config.win.DARLA.event&&e.soon(function(){try{e.config.win.DARLA.event("AGOF")}catch(e){y.error("error firing secureFrame event",{err:e})}}),m.adManager.setAdCouldBeShown(!1),e.config.win.onappclientnav)try{e.config.win.onappclientnav()}catch(i){}e.Accessibility.manageFocusOutlines(n),e.rapidTracker.beaconScroll(n)}function h(i){return new e.Promise(function(n,r){var a=setTimeout(function(){r(new Error("Initial View Timeout"))},1e4);i.params.appContext=m,b.showContent(e.one("#content > .view"),{view:{name:i.name,config:i.params}},function(o){e.one("body").removeClass("dark-loader"),o._params&&(o._params.keyEventScope=o.name+o._yuid),o.setViewDataOnHistory("referrer",document.referrer),(function(i,n){var t={spaceId:n,pageId:i.replace(/-/g,"_"),serverip:e.config.flickr.lighthouse.serverip,uuid:e.config.flickr.lighthouse.uuid,paft:!0,clientMetrics:m.clientMetrics,signedIn:m.getViewer().signedIn,rapidOnly:k,beaconToRapid:v,rapid:e.rapidTracker};m.Lighthouse=new e.Lighthouse(t)})(i.name,i.spaceId),o.set("isRootView",!0),o.initialize().then(function(){p(),d(),e.config.win.DARLA_CONFIG={events:{AGOF:{name:"AGOF",ps:"RS"}},positions:{RS:{id:"RS",dest:"tgtRS",hcpx:1,wcpx:1,h:1,w:1,supports:!1}}},"de-DE"===e.one("html").getAttribute("lang")&&setTimeout(function(){var i=e.Node.create("<script defer='true' async='true' src='https://fc.yahoo.com/sdarla/php/client.php?f=2022219890&l=RS&npv=1&ref=https%3A//flickr.com&rtype=boot'>");e.one("head").append(i)},100),u(),m.getKeyboardManager().setCurrentKeyEventScope(o.name+o._yuid),c(),e.DeferImages.init(),e.Accessibility.manageFocusOutlines(o),e.rapidTracker.beaconScroll(o),t(["campaignID","linkID"]),(function(){if(e.config.flickr.requestConfig&&e.config.flickr.requestConfig.auth&&e.config.flickr.requestConfig.auth.isInsecureGod){var i=e.all("[data-view-signature]");i.size()&&y.warn("View signature mismatches detected! A view likely modified the `params` object directly.",{views:i.getDOMNodes()})}})(),clearTimeout(a),n()}).then(null,function(e){throw y.error("There was a problem initializing or activating the view.",{err:e}),r(),e})}),b.before("navigate",o),b.before("activeViewChange",l),e.on("history:change",s),b.after("activeViewChange",g)})}function w(i,n,t,r){var a={};return e.Views&&e.Views[i]&&(a[i]={type:e.Views[i],preserve:!1}),b=new e.App({serverRouting:!0,viewContainer:"#content",container:"#content",linkSelector:":not(.server-only-link):not([target=_blank])",scrollToTop:!1,views:a}),v=r.flipper["enable-lighthouse-and-rapid-performance-beaconing"],(k=r.flipper["enable-rapid-only-performance-beaconing"])||e.FlickrClientMetrics.gatherColdStartData(),new e.FlickrRouter(b,e.config.flickr.routes),r.auth=n,r.flapp=b,m=(function(i){return window.appContext=new e.AppContext(i),window.appContext})(r),m.clientMetrics=new e.FlickrClientMetrics(m),k||(m.apiMetrics=new e.FlickrAPIMetrics(m)),m.routeTiming=r.routeTiming,m.routeConfig=r.routeConfig,m.getHealthBeaconer(),e.mix(e.Node.DOM_EVENTS,{transitionend:!0,webkitTransitionEnd:!0}),e.ClientTransport.authorize(m),window.addEventListener("unload",function(i){e.ClientTransport.unloading=!0}),window.addEventListener("load",function(i){e.ClientTransport.unloading=!1}),m.modelImportExport.importAll(t)}var m,v,k,b,y=require("hermes-core/flog")(i),C=!1,A=!0;e.ClientApp={init:function(i){if(void 0===i)return e.Promise.reject({message:"Invalid config object supplied, was undefined."});var o,c,s=i.initialView,l=i.modelExport,u=i.auth,p=this;return u||n(),o=u&&i.auth.signedIn?i.auth.csrf:null,e.config.flickr.csrf.token=o,e.config.flickr.requestConfig={auth:u},i.params.routeTiming=i.routeTiming,i.params.routeConfig=i.routeConfig,t(e.config.flickr.routing_params),window.location.search&&window.location.search.match(/yc=/)&&(c=e.QueryString.parse(window.location.search.replace("?","")),e.config.flickr.ycParam=c.yc),e.transportFactory=function(i,n){return new e.ClientTransport(n)},r(s.name,e).then(function(){return w(s.name,u,l,i.params)}).then(function(){return h(s)}).then(function(){e.AnchorRepositioner.jumpTo(),e.config.win.addEventListener("beforeunload",a.bind(p))}).then(e.config.win.onappinit)},beforeUnload:a,beforeNavigate:o,_loadInitialView:r,langBundles:["client-app"],updateRapidTracker:f,disableClientNav:n},e.mix(e.ClientApp,e.Localizable)},"@VERSION@",{requires:["app-base","app-content","router","app-context","client-transport","flickr-router","flickr-client-metrics","flickr-api-metrics","handlebars-helpers","lighthouse","comscore","loader-bar","murmurhash","node","rapid","site-key","better-use","flickr-promise","global-events","querystring-parse-simple","querystring-stringify-simple","storage-helper","keyboard-manager","dom","overflow-helper","defer-images","accessibility","anchor-repositioner"],affinity:"client",langBundles:["client-app"]});YUI.add("csrf-updater",function(t){"use strict";var e=require("hermes-core/flog")("csrf");t.CsrfUpdater=function(t){this.flickrAPI=t,this._tasks=[]},t.CsrfUpdater.prototype.getKey=function(){return t.config.flickr.csrf.token||null},t.CsrfUpdater.prototype.isExpired=function(){return!!t.config.flickr.csrf.token&&Date.now()/1e3>t.config.flickr.csrf.csrfExpiresAt},t.CsrfUpdater.prototype.invalidate=function(t){var e=this._lastStored||0;if(t||(t=0),!(t<e))return this.setExpired()},t.CsrfUpdater.prototype.setExpired=function(){return t.config.flickr.csrf.csrfExpiresAt=0},t.CsrfUpdater.prototype.store=function(e,r){this._lastStored=Date.now(),r||(r=Math.floor(this._lastStored/1e3)),t.config.flickr.csrf.token=e,t.config.flickr.csrf.csrfFetched=r,t.config.flickr.csrf.csrfExpiresAt=r+t.config.flickr.csrf.fetch_interval,this.drainQueue()},t.CsrfUpdater.prototype.pushToQueue=function(t){this._tasks.push(t)},t.CsrfUpdater.prototype.drainQueue=function(){for(;this._tasks.length;)this._tasks.shift().resolve()},t.CsrfUpdater.prototype.hasQueuedTasks=function(){return!!this._tasks.length},t.CsrfUpdater.prototype.scheduleFutureFetch=function(){t.config.flickr.csrf.token&&(this._timerFutureFetch=setTimeout(this.fetch.bind(this),1e3*t.config.flickr.csrf.fetch_interval))},t.CsrfUpdater.prototype.scheduleRetry=function(e){var r=this,s=this._fetchRuns>4?1:Math.pow(2,(this._fetchRuns||1)-1)/10,i=t.config.flickr.csrf.retry_interval*s;clearTimeout(this._timerRetry),this._timerRetry=setTimeout(function(){r._timerRetry=null,r.fetch(e)},1e3*i)},t.CsrfUpdater.prototype.fetch=function(r){var s=this,i=s.hasQueuedTasks();if(clearTimeout(this._timerFutureFetch),YUI.Env.isServer){if(!r&&(r=new t.Promise(function(t,e){this.resolve=t,this.reject=e}),this.pushToQueue(r),i))return r;this._fetchRuns||(this._fetchRuns=0),this._fetchRuns++,this.flickrAPI.fetchCsrf().then(function(i){var f=i.token;if(!i.token)return e.error("Failed to fetch csrf token",i),t.fire("csrf:badkey",i),void s.scheduleRetry(r);e.log("Received new csrf token",i),t.fire("csrf:goodkey"),s._fetchRuns=0,s.store(f),s.scheduleFutureFetch()},function(i){e.error("Failed to fetch csrf token",{err:i}),t.fire("csrf:badkey",i.message),s.scheduleRetry(r)})}else t.ClientApp&&t.ClientApp.disableClientNav();return r}},"@VERSION@",{requires:["fletrics","client-app"]});YUI.add("flutil",function(e){"use strict";var t,n=e.config.win,r=e.config.doc,o={transitionTimeout:2e3},i={getPrefixedStyleProperty:{}},a={};t=e.flutil={xbrowser:{transition:{property:"transitionProperty",duration:"transitionDuration",transitionEndEvent:"transitionend"}},setStylePrefixed:function(t,n,r){var o=this.getPrefixedStyleProperty(t);return e.Array.each(o,function(e){r.setStyle(e,n)}),r},getPrefixedStyleProperty:function(t){if(i.getPrefixedStyleProperty[t])return i.getPrefixedStyleProperty[t];var n=[];return e.Array.each(["-webkit-","-moz-","-ms-",""],function(e){n.push(e+t)}),i.getPrefixedStyleProperty[t]=n,n},dump:function(){for(var e,t=new Array(arguments.length),n=0;n<t.length;++n)t[n]=arguments[n];e="string"==typeof t[0]?t.shift():"LOG",t.unshift("color: #FC0"),t.unshift("%c["+e+"]"),console.log.apply(console,t)},extend:function(e){e||(e={});for(var t=new Array(arguments.length),n=0;n<t.length;++n)t[n]=arguments[n];return Array.prototype.slice.call(t,1).forEach(function(t){if(t)for(var n in t)e[n]=t[n]}),e},objectCreate:function(e,n){var r,o;return r=function(){},r.prototype=e,o=new r,n?t.extend(o,n):o},result:function(t){return e.Lang.isFunction(t)?t():t},onTransitionEnd:function(e,r){if(r&&"function"==typeof r){var i,a,u,s;if(e=e.getDOMNode(),u=n.getComputedStyle(e)[t.xbrowser.transition.property],s=n.getComputedStyle(e)[t.xbrowser.transition.duration],!u||!s)return r();a=function(){clearTimeout(i),e.removeEventListener(t.xbrowser.transition.transitionEndEvent,a),r()},i=setTimeout(a,o.transitionTimeout),e.addEventListener(t.xbrowser.transition.transitionEndEvent,a)}},toCamelCase:function(e){return e[0].toUpperCase()+e.slice(1).toLowerCase()},setCookie:function(t){if(!t.cookieName||void 0===t.cookieValue||!t.path)throw new Error("[flutil.setCookie] Missing important parameters to set a cookie");var n=t.cookieName,r=t.cookieValue,o=t.domain||".flickr.com",i=t.path,a=t.expiresMonthsFromNow||3,u=e.Lang.isNumber(t.expires)?t.expires:e.moment().add(a,"months").toDate();t.remove&&e.Cookie.remove(n,{path:i}),e.Cookie.set(n,r,{domain:o,path:i,expires:u})},createFragment:function(e){var t,n=r.createElement("div"),o=r.createDocumentFragment();for(n.innerHTML=e;t=n.firstChild;)o.appendChild(t);return o},constrainToValues:function(e,t){if(!t)throw new Error("Must supply list to constrain to values.");return e&&"string"==typeof e?t.indexOf(e)<0?t[0]:e:t[0]},escapeInput:function(e,t){var n;return r?e||"number"==typeof e?(t||(t="text"),"html"===t?((n=r.createElement("div")).appendChild(r.createTextNode(e)),n.innerHTML):"text"===t?(n=r.createElement("div"),e=e.replace(/(<([^>]+)>\s*)+/gi," ").trim(),n.appendChild(r.createTextNode(e)),n.innerHTML):"numericstring"===t?(e+"").replace(/[^\d]/,""):void 0):"":e},disableEvent:function(n,r){r=e.merge({excepted:":not(*)",onDisabledEvent:null},r),document.body.addEventListener&&(a[n]=a[n]||{},a[n][r.excepted]&&t.enableEvent(n,r.excepted),a[n][r.excepted]=function(t){r.excepted&&e.one(t.target).ancestors(r.excepted,!0).isEmpty()&&(t.preventDefault(),t.stopPropagation(),r.onDisabledEvent&&r.onDisabledEvent(t))},document.body.addEventListener(n,a[n][r.excepted],!0))},enableEvent:function(t,n){n=e.merge({excepted:":not(*)"},n),a[t]&&a[t][n.excepted]&&(document.body.removeEventListener(t,a[t][n.excepted],!0),a[t][n.excepted]=null)},unescape:function(t){if(!t||!e.Lang.isString(t))return t;var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#39;":"'","&#92;":"\\"};return t.replace(/(&amp;|&lt;|&gt;|&quot;|&#x27;|&#39;|&#92;)/gi,function(e){return n[e.toLowerCase()]})},normalizeURIComponents:function(e){var t,n,r,o;t={"&":["&amp;","&#x00026;","&#38;"],"<":["&lt;","&#x0003C;","&#60;"],">":["&gt;","&#x0003E;","&#62;"],'"':["&quot;","&#x00022;","&#34;"],"'":["&apos;","&#x00027;","&#39;"],"`":["&grave;","&DiacriticalGrave;","&#x00060;","&#96;"]},e=e.replace(/\+/g," ");for(n in t)r=n,o=t[n],e=e.replace(new RegExp(o.join("|"),"gi"),r);return e=decodeURIComponent(e)},template:function(e,t){return e.replace(/\{\{([\w\.=]+)\}\}/g,function(e,n){var r,o=n.split(/=/);return void 0!==(r=o[0].split(/\./).reduce(function(e,t){return e?e[t]:null},t))&&null!==r?r+"":o[1]||""}).trim()},createHashCode:function(e){var t;return t="object"!=typeof e?e+"":Object.keys(e||{}).map(function(t){var n=t;try{n+=JSON.stringify(e[t])}catch(e){n+="?"}return n}).join(""),t=t.split("").reduce(function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e},0).toString().replace(/^-/,""),"0000000000".slice(0,-1*t.length)+t},camelCaseifyKeys:function(e){return Object.keys(e).reduce(function(n,r){return n[t.camelCaseify(r)]=e[r],n},{})},camelCaseify:function(e){return e.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})},unCamelCaseify:function(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^-/,"")},unicodeVariants:["(?:ae|æ)","(?:oe|œ)","(?:ss|ß)","(?:th|Þ)","[aáàâäãaåấ]","[eéèêëě3]","[iíìîïǐ]","[oóòôöõǒỏơớờởỡợø]","[uúùûüǔǚưứừửữự]","[yýÿ]","[cçč]","[dÐ]","[fƒ]","[gǧ]","[hȟ]","[jǰ]","[kǩ]","[lľ]","[nñň]","[rř®]","[sšṧ]","[tť]","[zž]"],agnosticizeUnicode:function(e){var t,n=this.unicodeVariants,r=n.length;for(t=0;t<r;t++)e=e.replace(new RegExp(n[t],"gi"),n[t]);return e},buildHttpQuery:function(e,t){return e+"?"+Object.keys(t||{}).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")},formatNumbers:function(e){return Math.floor(e/1e6)>0?e=Math.floor(e/1e5)/10+"M":Math.floor(e/1e3)>0?e=Math.floor(e/100)/10+"K":e},formatIntlPluralNumber:function(t,n,r){var o=e.flutil.formatNumbers(n);return r?t.replace(/(?:\d*[,\.]\d+)+/,o):t.replace(/(?:\d*[,\.\s]\d+)+/,o)},openPopupWindow:function(t,n){var r,o,i,a,u,s;if("undefined"!=typeof window)return o=window,n=e.mix({name:"WIN"+(new Date).getTime(),ui:{}},n||{},!0),(i=e.mix({dependent:!0,status:!0,scrollbars:!0,width:600,height:600},n.ui,!0)).top||(i.top=Math.floor((o.screen.height-i.height)/2)),i.left||(i.left=Math.floor((o.screen.width-i.width)/2)),r=Object.keys(i).map(function(e){var t=i[e];return"boolean"==typeof t&&(t=t?"yes":"no"),e+"="+t}).join(","),(o=o.open(t,n.name,r)).focus(),(n.onUrlChange||n.onClose)&&(a="_start_",s=setInterval(function(){if(!o.location)return clearInterval(s),void(n.onClose&&n.onClose());try{u=o.location.href||"x-origin"}catch(t){o.postMessage("",e.url())}u!==a&&(a=u,n.onUrlChange&&n.onUrlChange(u))},1e3)),o},parseYYYYMMDDDatestamp:function(t){return e.Lang.isString(t)&&8===t.length?Date.parse(t.substr(0,4)+"-"+t.substr(4,2)+"-"+t.substr(6,2)):null},photoCoords:{normalize:function(e,t,n,r){return{x:e/500,y:t/375,w:n/500,h:r/375}},denormalize:function(e){return{x:500*e.x,y:375*e.y,w:500*e.w,h:375*e.h}},denormX:function(e){return 500*e.x},denormY:function(e){return 375*e.y},denormW:function(e){return 500*e.w},denormH:function(e){return 375*e.h}},getGroupsOptoutValues:function(t){var n=[];return!0===t["rebootify-group-members"]&&n.push({name:"groups_members_opt",value:0}),!0===t["enable-groups-discussion-optout"]&&n.push({name:"groups_discuss_opt",value:0}),!0===t["enable-groups-optout"]&&n.push({name:"groups_opt",value:0}),{url:e.url("/help/forum/en-us/72157645851675914/lastpage#reply"),flippers:n}},nonLockingSynchronousLoop:function(e,t,n,r){var o,i=0,a=!0,u=Object.keys(e),s=function(e){t(e),++i>=c?n():i===o||a?(i===o&&(o+=r.threshold),a=!1,setTimeout(function(){s(u[i])},1)):s(u[i])},c=u.length;(r=r||{}).threshold=r.threshold||1e3,o=r.threshold,a=!1!==r.earlyUnlock,s(u[i])}}},"@VERSION@",{requires:["url"]});/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("base-pluginhost",function(e,t){var n=e.Base,r=e.Plugin.Host;e.mix(n,r,!1,null,1),n.plug=r.plug,n.unplug=r.unplug},"3.16.0",{requires:["base-base","pluginhost"]});
/*
YUI 3.16.0 (build 76f0e08)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("template-base",function(e,t){function n(t,n){this.defaults=n,this.engine=t||e.Template.Micro,this.engine||e.error("No template engine loaded.")}n._registry={},n.register=function(e,t){return n._registry[e]=t,t},n.get=function(e){return n._registry[e]},n.render=function(t,r,i){var s=n._registry[t],o="";return s?o=s(r,i):e.error('Unregistered template: "'+t+'"'),o},n.prototype={compile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.compile(t,n)},precompile:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.precompile(t,n)},render:function(t,n,r){return r=r?e.merge(this.defaults,r):this.defaults,this.engine.render?this.engine.render(t,n,r):this.engine.compile(t,r)(n,r)},revive:function(t,n){return n=n?e.merge(this.defaults,n):this.defaults,this.engine.revive?this.engine.revive(t,n):t}},e.Template=e.Template?e.mix(n,e.Template):n},"3.16.0",{requires:["yui-base"]});
YUI.add("flickr-view",function(e,i){var t=require("hermes-core/flog")(i);e.FlickrView=e.Base.create("flickrView",e.Base,[],{viewState:null,subviews:{},subviewConfig:null,_eventHandles:null,initializer:function(e){return this.appContext=e.appContext,delete e.appContext,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.set("headContainer",""),this.isBuilt=!1,this.isActivated=!1,this.isErrorBuilt=!1,this.subviewsWithLoadingError={},this._params=e||{},this.isMobile=e.isMobile,this.subviews={},this._eventHandles=[],this.appContext&&!this.appContext.viewTiming&&(this.appContext.viewTiming={}),this.appContext&&(this.appContext.viewTiming[this.name]={initialize:0,loadState:0,buildContainer:0,buildHeadContainer:0,activate:0}),this},initialize:function(i){var r=this;return this.initializeStartTime=Date.now(),this.isErrorBuilt=!1,this.serverRendered=!(!i||!i.serverRendered)&&i.serverRendered,r.beforeDestroy&&(r.beforeDestroyHandler=r.before("destroy",r.beforeDestroy)),YUI.Env.isServer||this.registerEventHandler(this.appContext.flapp.after("activeViewChange",function(e){r.normalizedActivate()})),this.on("parentViewEvent",this.handleParentViewEvent.bind(this,this.name)),this.setupSubviews().then(function(){var e,i;if(r.isErrorBuilt){if(r.error.is404)throw r.error;throw i=new Error("Subview of "+r.name+" causing loadState error"),r.error&&(i.message+=": "+r.error.message,r.error.method&&(i.message+=", method="+r.error.method),i.message+=" | subview failure: "+r.error.fatal,r.error.wasDealbreaker&&(i.message+=" dealbreaker failed "),r.error.wasMultipleSubviews&&(i.message+=" multiple subviews failed "),i.fatal=r.error.fatal),i}if(r.loadStateTimingStart=Date.now(),!(e=r.loadState()))throw new Error("View "+r.name+" loadState function does not return a promise");return e}).then(function(){if(r.appContext&&r.appContext.viewTiming&&r.appContext.viewTiming[r.name]&&(r.appContext.viewTiming[r.name].loadState=Date.now()-r.loadStateTimingStart),YUI.Env.isServer||!r.get("container").hasClass("requiredToShowOnServer")||i&&i.wasDeferred){var e=Date.now();try{r.buildContainer()}catch(e){throw t.error("Error building",{topic:r.name,err:e}),r.fire("loadingError",{message:e.message,fatal:!0,wasDealbreaker:!0}),r.buildErrorContainer(),r.isErrorBuilt=!0,e}if(r.appContext&&r.appContext.viewTiming&&r.appContext.viewTiming[r.name]&&(r.appContext.viewTiming[r.name].buildContainer=Date.now()-e),r.get("isRootView")){r._buildFullRootViewAdditionalViewClasses();var n=r.get("rootViewAdditionalViewClasses");n&&n.length>0&&r.get("container").addClass(n.join(" "))}}r.isBuilt=!0,r.isErrorBuilt=!1,r.fire("loadingSuccess")},function(e){throw r.fire("loadingError",{message:e.message,fatal:e.fatal,is404:e.is404,wasMultipleSubviews:e.wasMultipleSubviews,wasDealbreaker:e.wasDealbreaker}),r.buildErrorContainer(),r.isErrorBuilt=!0,t.error("Error loading state",{topic:r.name,err:e}),e}).then(function(){var i,t;return r.isErrorBuilt||r.get("isActiveViewAgnostic")||(i=Date.now(),r._buildFullHeadMeta(),r.buildHeadContainer=Date.now()-i),YUI.Env.isServer||(r.shouldDeferSubviews&&r._setupDeferredSubviewsInitialization(),t=Date.now(),r.normalizedActivate(),r.appContext&&r.appContext.viewTiming&&r.appContext.viewTiming[r.name]&&(r.appContext.viewTiming[r.name].activate=Date.now()-t)),r.appContext&&r.appContext.viewTiming&&r.appContext.viewTiming[r.name]&&(r.appContext.viewTiming[r.name].initialize=Date.now()-r.initializeStartTime),!YUI.Env.isServer&&r._params.logViewTimings&&r.wasRequiredToShow&&e.fletrics.set(r.name.replace(/\-/g,".")+".viewtiming",r.appContext.viewTiming[r.name].initialize),r},function(e){throw YUI.Env.isServer||(r.shouldDeferSubviews&&r._setupDeferredSubviewsInitialization(),r.normalizedActivate()),e}).catch(e.PromiseCatcher(this.name))},render:function(){return this},buildHeadContainer:function(){return this.set("headContainer",""),this},_buildSubviewHeadContainers:function(){var e=[],i=this;return Object.keys(this.subviews).forEach(function(t){-1===e.indexOf(i.subviews[t].get("headContainer"))&&e.push(i.subviews[t].get("headContainer"))}),e.sort(function(e,i){var t=e.toLowerCase().indexOf("<script")>-1,r=i.toLowerCase().indexOf("<script")>-1;return t&&!r?1:!t&&r?-1:0}).join("")},_buildFullHeadMeta:function(){var e;return this.buildHeadContainer(),e=this.get("headContainer"),e=e.concat(this._buildSubviewHeadContainers()),this.set("headContainer",e.concat("")),this},setRootViewAdditionalViewClasses:function(){return this.set("rootViewAdditionalViewClasses",[]),this},_buildFullRootViewAdditionalViewClasses:function(){var e=[];return e=e.concat(this._buildSubviewRootViewAdditionalViewClasses()),this.set("rootViewAdditionalViewClasses",e),this},_buildSubviewRootViewAdditionalViewClasses:function(){this.setRootViewAdditionalViewClasses();var e=this.get("rootViewAdditionalViewClasses")||[],i=this;return Object.keys(this.subviews).forEach(function(t){var r=i.subviews[t]._buildSubviewRootViewAdditionalViewClasses();e=e.concat(r)}),e},_setupDeferredSubviewsInitialization:function(){setTimeout(function(){var i=e.config.win.document.body;i.scrollTop>0||i.clientHeight-50<=i.scrollHeight?this._loadDeferredSubviews():(this.deferredViewScrollListener=e.globalEvents.subscribe("window:scroll",this._loadDeferredSubviews.bind(this)),this.registerEventHandler(this.deferredViewScrollListener))}.bind(this),10)},_loadDeferredSubviews:function(){this.loadingDeferred||(this.loadingDeferred=!0,this._removeDeferredViewScrollListener(),this._recursivelyLoadDeferredSubview(0,!1))},_removeDeferredViewScrollListener:function(){this.deferredViewScrollListener&&(this.deferredViewScrollListener.detach(),this.deferredViewScrollListener=null)},_recursivelyLoadDeferredSubview:function(i,r){var n=Object.keys(this.subviewConfig||[]).filter(function(e){var i=this.subviewConfig[e];return!0!==i.disabled&&(("function"!=typeof i.disabled||!i.disabled.call(this,this._params))&&this.subviewConfig[e].canDefer)}.bind(this)),a=this;if(i<=n.length-1){var s,o=n[i],u=e.merge(this._params,this.subviewConfig[o]);u.container=null,u.wasDeferred=!0,t.log("Loading deferred view",{topic:a.name,view:o});try{s=this.appContext.getView(o,u)}catch(e){return void this._onDeferredViewLoadingError(i,r,e)}s.then(function(e){if(!e)return t.error("An error occured trying to load the deferred view.",{topic:a.name}),r?(i++,r=!1):r=!0,void a._recursivelyLoadDeferredSubview(i,r);e.initialize(u).then(function(){e.on("subviewViewEvent",function(i){i&&i.details&&i.details.length&&a.onSubviewEvent.call(a,e.name,i.details)}),u&&u.additionalViewClasses&&u.additionalViewClasses.forEach(function(i){e.get("container").addClass(i)}),a._addDeferredViewToDOM(e),e.normalizedActivate(),i++,a._recursivelyLoadDeferredSubview(i,!1)}).catch(a._onDeferredViewLoadingError.bind(this,i,r))})}},_onDeferredViewLoadingError:function(e,i,r){t.error("An error occured trying to initialize the deferred view",{topic:this.name,err:r}),i?(e++,i=!1):i=!0,this._recursivelyLoadDeferredSubview(e,i)},_addDeferredViewToDOM:function(e){if(e){var i=this.get("container").one("."+e.name),r=e.get("container");i&&r?i.replace(r):t.error("Could not add view to DOM in _addDeferredViewToDOM",{topic:this.name,view:e.name})}else t.error("Non-view passed to _addDeferredViewToDOM.",{topic:this.name})},attachKeyEvent:function(e,i,t){return this.registerEventHandler(this.appContext.getKeyboardManager().on(e,t||this._params.keyEventScope||"*",i.bind(this)))},setContainerHTML:function(e){var i=this;return this.get("container").setHTML(e),YUI.Env.isServer||(this.get("container").generateID(),Object.keys(this.subviews||{}).forEach(function(e,t,r){var n=i.subviews[e],a=n.get("container"),s=n.getId?n.getId():a._yuid,o=i.get("container").one("#"+s);o&&o.replace(a)})),this},setupSubviews:function(){var i,r=this,n=[],a=[],s=[],o=this.appContext.flipper.isFlipped("enable-non-blocking-on-non-required-views"),u={};if(!this.subviewConfig)return e.Promise.resolve();if(Object.keys(this.subviewConfig).forEach(function(e){!0!==r.subviewConfig[e].disabled&&("function"==typeof r.subviewConfig[e].disabled&&r.subviewConfig[e].disabled.call(r,r._params)||(u[e]=r.subviewConfig[e]))}),Object.keys(u).map(function(l){i=YUI.Env.isServer?u[l].requiredToShowOnServer||u[l].requiredToShow||r.appContext.forceServerRender&&!u[l].neverShowOnServer:u[l].requiredToShowOnClient||u[l].requiredToShow;var c=e.merge(r._params,u[l]);if(!r.shouldDeferSubviews&&c.canDefer&&delete c.canDefer,r.shouldDeferSubviews&&c.canDefer){t.log("Deferring subview.",{topic:r.name,view:l});(o?s:n).push(r.instantiateSubview(l,c).then(function(e){return e.setContainerHTML(""),e.get("container").addClass("deferred-view"),e}))}else if(i){(o?a:n).push(r.instantiateSubview(l,c).then(function(e){return e.wasRequiredToShow=!0,r.setupSubview(l,c,e)}))}else{(o?s:n).push(r.instantiateSubview(l,c).then(function(i){i.wasRequiredToShow=!1,YUI.Env.isServer||e.soon(function(){r.setupSubview(l,c,i)})}))}}).filter(function(e){return!!e}),o){return(a.length?e.Promise.all(a):e.Promise.resolve()).then(function(){s.length&&!YUI.Env.isServer&&e.Promise.all(s).then(function(){r.buildContainer(),r.normalizedActivate()})})}return n.length?e.Promise.all(n):e.Promise.resolve()},registerSubview:function(e,i){i||(i=e.name),this.subviews[i]=e},instantiateSubview:function(i,r){var n=this;return r.container=this.getContainer({isSubview:!0,subviewName:i,subviewParams:r}),this.appContext.getView(i,r).then(null,function(){return t.log("getView failed to load view, retrying once more."),n.appContext.getView(i,r)}).then(function(e){return e.on("loadingError",n.handleSubviewLoadingError.bind(n)),e.on("loadingSuccess",n.handleSubviewLoadingSuccess.bind(n)),e.on("subviewViewEvent",n.handleSubviewEvent.bind(n,e.name)),n.registerSubview(e,i),e._params&&(e._params.keyEventScope=n._params.keyEventScope),e}).catch(e.PromiseCatcher(this.name))},onSubviewEvent:function(e,i){return!0},onParentViewEvent:function(e,i){return!0},handleSubviewEvent:function(e,i){var t=i?i.details||[]:[];!1!==this.onSubviewEvent(e,t)&&this.fire.apply(this,["subviewViewEvent"].concat(t))},handleParentViewEvent:function(e,i){var t,r=i?i.details||[]:[];if(!1!==this.onParentViewEvent(e,r))for(t in this.subviews)this.subviews[t].fire.apply(this.subviews[t],["parentViewEvent"].concat(r))},handleSubviewLoadingSuccess:function(e){this.subviewsWithLoadingError[e.target.name]&&delete this.subviewsWithLoadingError[e.target.name]},handleSubviewLoadingError:function(e){var i;this.subviewConfig[e.target.name].dealbreaker&&(this.hasDealbreakerSubviewLoadingError=!0),this.subviewsWithLoadingError[e.target.name]=e.details[0],this.isErrorBuilt||(i=Object.keys(this.subviewsWithLoadingError),(this.hasDealbreakerSubviewLoadingError||i.length>=2)&&(this.error={message:"",fatal:!0},i.forEach(function(e,t){var r=this.subviewsWithLoadingError[e];t!==i.length-1?this.error.message+="["+e+"] "+r.message+" | ":this.error.message+="["+e+"] "+r.message,r.is404&&(this.error.is404=!0),r.method&&(this.error.method+=r.method),r.fatal||(this.error.fatal=!1)}.bind(this)),this.fire("loadingError",{message:this.error.message,fatal:this.error.fatal,is404:this.error.is404,wasDealbreaker:this.hasDealbreakerSubviewLoadingError,wasMultipleSubviews:i&&i.length>=2}),this.buildErrorContainer(),this.isErrorBuilt=!0,t.error("subview forced the error loading state",{topic:this.name,view:e.target.name})))},setupSubview:function(i,r,n){var a=this;return r=e.merge(r||{}),r.alreadyRendered=a.alreadyRendered,n.set("isActiveViewAgnostic",a.get("isActiveViewAgnostic")),n.initialize(r).then(function(){return a.subviews[i]},function(e){t.error("Error getting/initializing view",{topic:a.name,err:e,view:i})}).catch(e.PromiseCatcher(this.name))},attachEvents:function(i){if(i){var t={},r=this;Object.keys(i).forEach(function(n){var a,s;a={selector:(n.match(/([\w-_#\.\[\]~|$^*= ]+) /i)||[])[1]||"[data-action]",type:(n.match(/([\w]+):/i)||[])[1]||"click",action:(n.match(/:([\w]+)/i)||[])[1]||"_default_"},t[s=a.selector+"/"+a.type]||(t[s]={},r.registerEventHandler(r.get("container").delegate(a.type,function(i){var n,o,u,l;if(n=i.target.ancestor(a.selector,!0),"click"===a.type&&(o=i.target.ancestor(".server-only-link",!0)))return!0===i.metaKey||!0===i.ctrlKey?void 0:void(e.config.win.location=o.get("href"));if(n&&(u=n.getData()||{},l=u.action||"_default_",t[s].hasOwnProperty(l))){if(!t[s][l])throw new Error('Handler for "'+l+'" UI event is undefined');t[s][l].call(r,i,u)}},a.selector))),t[s][a.action]=i[n]})}},registerEventHandler:function(i){if(e.Lang.isFunction(i.detach))return this._eventHandles.push(i),i},detachRegisteredEvent:function(i){var t=this._eventHandles.indexOf(i);-1!==t&&e.Lang.isFunction(i.detach)&&(i.detach(),this._eventHandles.splice(t,1))},detachRegisteredEvents:function(){this._eventHandles.length&&(this._eventHandles.forEach(function(e){e.detach()}),this._eventHandles=[])},generateSignature:function(i,t){var r,n={},a=function(e){var i=0;if(0===e.length)return i;for(var t=0;t<e.length;t++)i=(i<<5)-i+(r=e.charCodeAt(t)),i&=i;return i};return e.Object.each(t,function(e,i){"container"!==i&&"appContext"!==i&&"context"!==i&&"cspNonce"!==i&&"parentView"!==i&&"keyEventScope"!==i&&void 0!==e&&"function"!=typeof e&&(n[i]="object"==typeof e?1:e)}),i+"__"+Object.keys(n).sort().map(function(e){var i,t;try{i=encodeURIComponent(e)}catch(t){i=encodeURIComponent(a(e))}try{t=encodeURIComponent(n[e])}catch(t){i=encodeURIComponent(a(n[e]))}return i+"_"+t}).join("__")},getContainer:function(i){(i=i||{}).subviewParams=i.subviewParams||{};var t,r,n,a,s=["view",i.subviewName||i.viewName||this.name],o=i.subviewName?i.subviewParams.additionalViewClasses:this.additionalViewClasses,u=i.subviewParams.preferredViewTag||"div";return(!i.isSubview||i.subviewParams.requiredToShowOnServer||i.subviewParams.requiredToShow)&&YUI.Env.isServer&&s.push("requiredToShowOnServer"),this.theme&&s.push(this.theme),e.Lang.isArray(o)&&o.length?s=s.concat(o):e.Lang.isFunction(o)&&(a=o.call(this),e.Lang.isArray(a)&&a.length&&(s=s.concat(a))),i.subviewName||s.push(e.FlickrView.ROOT_VIEW_CLASS_NAME),s=' class="'+s.join(" ")+'"',i.subview?t=i.subview.getId():i.subviewName&&i.subviewParams&&(t=this.generateSignature(i.subviewName,i.subviewParams)),YUI.Env.isServer?r={html:"",setHTML:function(e){this.html=e},getHTML:function(e){return this.html},get:function(e){switch(e){case"innerHTML":return this.html;case"outerHTML":return"<"+u+" "+s+(n?' style="'+Object.keys(n).reduce(function(e,i,t,r){return e+i+": "+n[i]+(t<r.length-1?"; ":"")},"")+'"':"")+(t?' data-view-signature="'+t+'"':"")+">"+this.html+"</"+u+">"}return null},hasChildNodes:function(){return!1},addClass:function(e){""!==(e=e.trim())&&(s=s.slice(0,-1)+" "+e+'"')},hasClass:function(e){return s.split('"')[1].split(" ").indexOf(e)>-1},removeClass:function(e){var i=s.split('"')[1].split(" "),t=i.indexOf(e);-1!==t&&(i.splice(t,1),s=' class="'+i.join(" ")+'"')},setStyle:function(e,i){n||(n={}),n[e]=i},setStyles:function(e){n||(n={}),Object.keys(e).forEach(function(i){n[i]=e[i]})},appendChild:function(e){this.html+=e.html},all:function(){return{each:function(){}}},one:function(){return null}}:(t&&(r=this.get("container").one('[data-view-signature="'+t+'"]')),r?r.removeAttribute("data-view-signature"):r=e.Node.create("<"+u+" "+s+"></"+u+">")),r},renderSubviews:function(){var e=this;return Object.keys(this.subviews).forEach(function(i,r,n){try{e.subviews[i].render()}catch(r){t.error("Error rendering view",{topic:e.name,err:r,view:i})}}),{}},templates:function(i){var r,n=e.Template.get("hermes/"+i),a=this.getLangBundles(),s=this;if(a.locales=this.appContext.lang||this.defaultLang,"function"!=typeof n)throw t.error("Template not found",{topic:this.name,template:i}),new Error("Template not found: "+i);return this.appContext.flipper&&(r=this.appContext.flipper),function(e){return!(e=e||{}).flippers&&r&&(e.flippers=r.toJSON()),e.isMobile=s._params.isMobile,e.cspNonce=s._params.cspNonce,s.appContext.forceServerRender&&(e.isServerRendered=!0),Object.keys(s.subviewConfig||{}).forEach(function(i){e[i]||(e[i]=s.subviews[i]?s.subviews[i].get("container"):"")}),n(e,{data:{intl:a,flippers:e.flippers}})}},loadState:function(){return e.Promise.resolve()},updateHead:function(){null!==this.get("headContainer")&&(e.one("head").all('[data-dynamic="true"]').remove(!0),e.one("head").append(this.get("headContainer")))},canActivate:function(){var e=!1;return(this.isBuilt||this.isErrorBuilt)&&(this.isActivated||this.isErrorActivated||this.isActiveAndInDOM()&&(e=!0)),e},isActiveAndInDOM:function(){var e=this.get("container");return e&&(this.get("isActiveViewAgnostic")||this.appContext.flapp.get("activeView").get("container").contains(e))&&e.inDoc()},activate:function(){return this},activateSubviews:function(){var e,i;for(e in this.subviews){i=this.subviews[e];try{i.normalizedActivate(),i.recursivelyActivateSubviews()}catch(i){t.error("Error activating view",{topic:this.name,err:i,view:e})}}return this},recursivelyActivateSubviews:function(e){var i,r,n=e||this.subviews;for(i in n)if((r=n[i]).canActivate()){r.normalizedActivate();try{r.normalizedActivate(),this.recursivelyActivateSubviews(r.subviews)}catch(e){t.error("Error activating view",{topic:this.name,err:e,view:r})}}return this},normalizedActivate:function(){this.canActivate()&&(this.isErrorBuilt?(this.isErrorActivated=!0,this.activateErrorContainer()):(e.rapidTracker.refreshTracker(),this.activate(),this.isActivated=!0,this.activateSubviews()))},buildErrorContainer:function(){this.setContainerHTML("")},activateErrorContainer:function(){var e=this,i=this.get("container").one(".retry");i&&i.on("click",function(i){i.preventDefault(),e.isErrorActivated=!1,e.initialize()})},setViewDataOnHistory:function(i,t){return e.HistoryHelper.setData(this.name,i,t)},getViewDataFromHistory:function(i){return e.HistoryHelper.getData(this.name,i)},getTrackingSegments:function(){return{}},reload:function(i,t){var r=this,n=[];if(!i.length)return e.Promise.resolve();for(var a=0;a<i.length;a++)n.push(this.appContext.getModelRegistry(i[a]));return e.Promise.all(n).then(function(e){for(var i=0;i<e.length;i++)Array.isArray(t)?e[i].remove(t[i]):e[i].remove(t);YUI.Env.isServer||r.appContext.flapp.navigate(r.appContext.getLocation().href)}).catch(e.PromiseCatcher(this.name))},destroy:function(i){this.set("destroyed",!0);var t,r=this.get("container");if(this.detachRegisteredEvents(),!YUI.Env.isServer&&this.isActiveAndInDOM()){this.setRootViewAdditionalViewClasses();var n=this.get("rootViewAdditionalViewClasses")||[],a=e.one("."+e.FlickrView.ROOT_VIEW_CLASS_NAME);n&&a&&n.forEach(function(e){a.removeClass(e)})}return this._removeDeferredViewScrollListener(),e.Node&&r&&(r.detach&&r.detach(),i&&(i.remove||i.delete)&&r.remove&&r.remove(!0),this.set("container",null)),this.destroySubviews(),t=e.FlickrView.superclass.destroy.call(this),this.beforeDestroyHandler&&this.beforeDestroyHandler.detach(),t},destroySubviews:function(){var e=this;Object.keys(this.subviews||{}).forEach(function(i,t,r){e.subviews[i].destroy()})},bringIntoFocus:function(){var e=this.get("container"),i=e.getAttribute("tabindex")||null;e.setAttribute("tabindex","-1"),e.focus(),e.blur(),i?e.setAttribute("tabindex",i):e.removeAttribute("tabindex")},setContainerWithTemplate:function(e,i){this.setContainerHTML(this.templates(e)(i))},godMessage:e.godMessage},{ATTRS:{container:{value:"",setter:function(e){return e||this.getContainer()}},spaceid:{value:792600503,validator:function(i){return e.Lang.isNumber(i)||e.Lang.isString(i)},setter:function(e){return parseInt(e,10)}},trackedElementIDs:{value:[],validator:function(i){return e.Lang.isArray(i)}},rapidConf:{value:{},validator:function(i){return e.Lang.isObject(i)}},isActiveViewAgnostic:{value:!1},isRootView:{value:!1},rootViewAdditionalViewClasses:{value:[],validator:function(i){return e.Lang.isArray(i)}}},create:function(i,r,n,a,s){e.namespace("Views"),e.Views[i]&&t.warn("A view with this name already exists. Did you mean to redefine it?",{view:i}),a.destroy&&a.destroy!==e.FlickrView.prototype.destroy&&t.warn("`destroy` method was overridden. Did you mean `destructor`?",{view:i}),a.initialize&&a.initialize!==e.FlickrView.prototype.initialize&&t.warn("`initialize` method was overridden. Did you mean `initializer`?",{view:i});try{e.Views[i]=e.Base.create(i,r,n,a,s)}catch(r){throw t.warn("`Base.create` method failed, maybe because of Chrome 51?",{view:i}),!YUI.Env.isServer&&e.config.win.beaconError&&e.config.win.beaconError("`Base.create` method failed, maybe because of Chrome 51?",e.config.win.location.href,r),r}if(r&&r!==e.FlickrView&&r.prototype&&r.prototype.langBundles){var o=[],u=(e.Views[i].prototype.langBundles||[]).concat(r.prototype.langBundles);o=e.Array.dedupe(u),e.Views[i].prototype.langBundles=o}return e.Views[i]},ROOT_VIEW_CLASS_NAME:"flickr-view-root-view"}),e.mix(e.FlickrView.prototype,e.Localizable)},"@VERSION@",{requires:["base","template-base","flickr-promise","handlebars-base","handlebars-helpers","localizable","history-helper","god-message","fletrics"]});YUI.add("model-proxy",function(e,t){var r=require("hermes-core/flog")(t);e.getModelProxyConstructor=function(t){var o;return o=function(e){this.id=e,this.registry=t,this.isModel=!0},o.prototype={},e.getModelProxyConstructor.skipList.forEach(function(e){o.prototype[e]=function(){var t=new Error("Registry methods are not exposed on models.");throw r.error({err:t,method:e}),t}}),e.Object.each(t,function(r,n){o.prototype[n]||0!==n.indexOf("_")&&e.Lang.isFunction(r)&&(Object.keys(r.prototype).length>0||(o.prototype[n]=(function(e){return function(){for(var r=new Array(arguments.length),o=0;o<r.length;++o)r[o]=arguments[o];return r.unshift(this.id),t[e].apply(t,r)}})(n)))},this,!0),o},e.getModelProxyConstructor.skipList=["add","get","load","proxy","remoteRead","remoteCreate","attributeSearch","removeAll","getCount","serialize","deserialize"]},"@VERSION@",{requires:[]});YUI.add("flickr-collection",function(t){var i,n={};(i=t.FlickrCollection=function(t,i,n){this.registry=t,this.id=i,this.attrName=n,this._data=[],this.fetchedStart=!1,this.fetchedEnd=!1,this.totalItems=Number.MAX_VALUE}).prototype={constructor:i,push:function(t){var i=this._data.concat();i.push(t),this.registry.setValue(this.id,this.attrName,i)},unshift:function(t){var i=this._data.concat();i.unshift(t),this.registry.setValue(this.id,this.attrName,i)},concat:function(t){var i=this._data.concat(t);this.registry.setValue(this.id,this.attrName,i)},remove:function(t){"string"==typeof t&&(t={id:t});var i,n=this.find(t,!0);return n&&((i=this._data.concat()).splice(n.index,1),this.registry.setValue(this.id,this.attrName,i)),n&&n.value},find:function(t,i){if(!t)return null;var n=null,e=Object.keys(t);return this._data.some(function(i,r){if(i)return e.every(function(n){return i[n]===t[n]})?(n={value:i,index:r},!0):void 0}),i?n:n?n.value:null},getFirstItem:function(){var t,i;for(t=0;t<this._data.length;t++)if(i=this._data[t])return{item:i,index:t};return null},getLastItem:function(){var t,i;for(t=this._data.length-1;t>=0;t--)if(i=this._data[t])return{item:i,index:t};return null},getList:function(){return this._data.concat()},size:function(){return this._data.length},toJSON:function(){var i=[];return t.Array.each(this.getList(),function(t){t&&i.push(t.toJSON())}),i},toString:function(){return this.registry.name+'["'+this.attrName+'"]'},appendToListMulti:function(t){this.concat(t)},appendToList:function(t){this.push(t)},prependToList:function(t){this.unshift(t)},getFromListByID:function(t,i){var n={};return n[i||"id"]=t,this.find(n)||void 0},removeFromList:function(t,i){var n={};return n[i||"id"]=t,this.remove(n)},hasMinBoundary:function(){return this.fetchedStart},hasMaxBoundary:function(){return this.fetchedEnd},_setValue:function(t){this._data=t}},t.FlickrCollection.executeFetch=function(i,e,r,a){var s;return a&&t.Lang.isFunction(a.run)?(s=JSON.stringify(i),n[s]||(n[s]=a.run.call(a,i,e.appContext).then(function(t){return delete n[s],t},function(t){throw delete n[s],t}),n[s])):t.Promise.reject("(flickr-collection::executeFetch) invalid fetcher for "+e.name+"["+r+"]")},t.FlickrCollection.trimArray=function(t){for(var i=0,n=t.length-1;i<t.length&&!t[i];)i++;for(;n>i&&!t[n];)n--;return t.slice(i,n+1)}},"@VERSION@",{requires:[]});YUI.add("paged-collection",function(t,e){var a=require("hermes-core/flog")(e);t.PagedCollection=function(t,e,a,s){this.constructor.superclass.constructor.call(this,t,e,a),s&&(s instanceof Array&&(s={pageContent:s,page:1,perPage:s.length}),s.totalPages&&(this.totalPages=s.totalPages),void 0===typeof s.totalItems||isNaN(parseFloat(s.totalItems))||(this.totalItems=parseFloat(s.totalItems)),this.fetchedStart=!!s.fetchedStart,this.fetchedEnd=!!s.fetchedEnd,this.addPage(s))},t.extend(t.PagedCollection,t.FlickrCollection,{getPage:function(e){var a,s,i,o,r,n,h;if(e&&e.page&&e.perPage&&!e.forceAPICall){if(n=this.totalPages&&e.page>=this.totalPages,h=this.totalItems&&s>=this.totalItems,a=e.perPage*(e.page-1),s=Math.min(e.perPage*e.page,this.totalItems),!n&&!h||!this.fetchedEnd)for(i=a;i<s;i++)if(void 0===this._data[i]||!this._data[i].exists()){o=!0;break}}else e||(e={}),o=!0;return o?(e.pathAlias||(e.id=this.id),e.isCollection=!0,(r=this.registry.attributes[this.attrName].pageFetch).fetchParams&&(e=t.merge(e,r.fetchParams)),t.FlickrCollection.executeFetch(e,this.registry,this.attrName,r.listFetcher)):t.Promise.resolve(this._data.slice(a,s))},addPage:function(t){var e,a,s=t.perPage*(t.page-1),i=s+Math.min(t.pageContent.length,t.perPage),o=0;if(t.forceAppend)this._data=this._data.concat(t.pageContent);else if(this._data.length<=s)this._data.length=s,this._data=this._data.concat(t.pageContent);else for(this._data.length<i&&(this._data.length=i),e=s;e<i;e++)this._data[e]=t.pageContent[o],o++;t.totalPages&&(this.totalPages=t.totalPages,t.page>=this.totalPages&&(this.fetchedEnd=!0)),void 0===typeof t.totalItems||isNaN(parseFloat(t.totalItems))||(a=parseFloat(t.totalItems),this.totalItems=a,this._data.length>=a?this.fetchedEnd=!0:s+parseInt(t.perPage,10)>a&&this._data.length<a&&(this.fetchedEnd=!0)),this.fetchedStart=this._data&&void 0!==this._data[0]},removePage:function(t){},getPageOf:function(t,e){e||(a.warn("`perPage` must be specified; defaulting to 50."),e=50);var s=this.find(t,!0);return s?Math.floor(s.index/e)+1:-1},getNextIncompletePage:function(t){var e=t.page*(t.perPage-1),a=Math.floor(this._data.length/t.perPage)+1;for(e;e<this._data.length;e++)if(void 0===this._data[e]||!this._data[e].exists()){a=Math.floor(e/t.perPage)+1;break}return a},_setValue:function(e){if(e instanceof Array)this.constructor.superclass._setValue.call(this,e);else{if(!(e=(function(e){return e?(e instanceof Array&&(e={pageContent:e}),e=t.merge({page:1,perPage:0,pageContent:[]},e)):(a.warn("No pageData sent to PagedCollection; aborting."),null)})(e)))return;e.remove?this.removePage(e):this.addPage(e)}}})},"@VERSION@",{requires:["flickr-collection"]});YUI.add("flickr-model-registry",function(e,t){function i(t,s,a){return!1===a&&"string"==typeof t&&"string"==typeof s&&(t=t.toLowerCase(),s=s.toLowerCase()),t===s||(e.moment.isMoment(t)&&e.moment.isMoment(s)?0===t.diff(s):!!(e.Lang.isArray(t)&&e.Lang.isArray(s)&&(function(t,s){var a=!0;t.length!==s.length&&(a=!1);a&&e.Array.some(t,function(e,t){if(!i(s[t],e))return a=!1,!0});return a})(t,s))||!!(e.Lang.isObject(t,!0)&&e.Lang.isObject(s,!0)&&(function(t,s){var a=!0;e.Object.size(t)!==e.Object.size(s)&&(a=!1);a&&e.Object.some(t,function(e,t){if(!s.hasOwnProperty(t)||!i(s[t],e))return a=!1,!0});a&&e.Object.some(s,function(e,s){if(!t.hasOwnProperty(s)||!i(t[s],e))return a=!1,!0});return a})(t,s)))}function s(t){var i=t;return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Array.prototype?(i=t.slice(),void 0!==t.hasMinBoundary&&(i.hasMinBoundary=t.hasMinBoundary),void 0!==t.hasMaxBoundary&&(i.hasMaxBoundary=t.hasMaxBoundary)):Object.getPrototypeOf(t)===Object.prototype&&(i={},e.Object.each(t,function(e,t){i[t]=e},this))),i}var a=require("hermes-core/flog")(t);e.Models={};var r=e.FlickrModelRegistry=function(t){this.appContext=t,this.attributes=this.attributes||{},this.attributes.id={writeOnce:"initOnly",setter:function(t){return e.Lang.isString(t)||(e.Lang.isNumber(t)?t+="":(a.warn("`id` falling back to a Y.guid",{topic:this.name,val:t}),t=e.guid())),t}},this._setDefaultRemoteMethods(),this._validateAttributes(),this._data={},this._dataSize=0,this._subscribers=[],this.hasWeakSubscribers=!1,this._chainedEvents={},this._derivedCache=void 0,this._unsavedModels={}};r.prototype={attributeSearch:function(t,s){var a=[];return t.id?a.push(t.id):e.Object.each(this._data,function(r,n){var o=!0;e.Object.some(t,function(e,t){if(!i(e,r[t],!1)){if(!0!==s)return o=!1,!0;if(!i(e,this.getDefaultValue(r.id,t),!1))return o=!1,!0}},this),o&&a.push(n)},this),a},load:function(t,i){var s,a,r=this;return i||(i={}),e.Lang.isObject(t,!0)?(s=this.attributeSearch(t).sort()[0],i=e.merge(t,i||{})):(s=t,i=e.merge({id:s},i)),s&&this.exists(s)?e.Promise.resolve(s):(this._fetchPromises||(this._fetchPromises={}),a=s||JSON.stringify(i),this._fetchPromises[a]?this._fetchPromises[a]:(this._fetchPromises[a]=this.remoteRead(i).then(function(){var e,i,n=s;if(s||(e=r.attributeSearch(t)).length>0&&(n=e[0]),delete r._fetchPromises[a],n&&r.exists(n))return n;throw i=new Error("["+r.name+"] Model ID is missing after fetching."),i.getModelFailure=!0,i}),this._fetchPromises[a]))},get:function(e,t){return this.load(e,t).then(this.proxy.bind(this))},add:function(t,i,s){var r;{if(e.Lang.isObject(t,!0)&&!e.Lang.isArray(t))return void 0===i&&(i=!1),r=this.attributes.id.setter.apply(this,[t.id,void 0]),this._data[r]?a.warn("Attempt to add a model that is already in the registry.",{topic:this.name,id:r}):(this._data[r]={},this._dataSize++,this._queueEvent("modelsAdded",{id:r}),i?this._data[r]=t:Object.keys(this.attributes).forEach(function(e){var i=this.attributes[e],a=t[e];i.readOnly||this.setValue(r,e,a,!0,s)},this),this.appContext.markAsNewlyFetched(this.name,r)),this.proxy(r);a.warn("`add` requires an object",{topic:this.name,data:t})}},remove:function(e){this.exists(e)&&(delete this._data[e],this._dataSize--,this._removeChainedEvents(e),this._removeEventSubscribers(e),this._queueEvent("modelsRemoved",{id:e}))},removeAll:function(){e.Object.each(this._data,function(e,t){this.remove(t)},this)},removeAllExcept:function(t){var i=t.reduce(function(e,t){return e[t]=!0,e},{});e.Object.each(this._data,function(e,t){i[t]||this.remove(t)},this)},_removeChainedEvents:function(t){var i;this._chainedEvents[t]&&(e.Object.each(this._chainedEvents[t],function(t,s){(i=this.attributes[s])&&(i.isModel?t.detach():(i.isListProxy||i.isCollection)&&e.Array.each(t,function(e){e.detach&&e.detach()}))},this),delete this._chainedEvents[t])},_removeEventSubscribers:function(t){var i=[];this._subscribers.length&&(e.Array.each(this._subscribers,function(e,s){e.id===t&&i.push(s)},this),e.Array.each(i,function(e){this._subscribers.splice(e,1)},this))},proxy:function(t){return this._ModelProxy||(this._ModelProxy=e.getModelProxyConstructor(this)),new this._ModelProxy(t)},getValue:function(t,i,r){var n,o,h;if(t&&i)if(this.exists(t)){if(o=this.attributes[i])return o.isListProxy?n=new e.ListProxy(this,t,i):(void 0===(n=this._data[t][i])&&(n=this.getDefaultValue(t,i)),h=o.getter,!r&&h&&(n=h.apply(this,[n,t])),n=s(n)),n;a.warn("`getValue` called for an attribute that isn't defined",{topic:this.name,id:t,attr:i})}else a.warn("`getValue` called for an id that doesn't exist in the registry.",{topic:this.name,id:t,attr:i});else a.warn("`getValue` requires two arguments.",{topic:this.name,id:t,attr:i})},setValue:function(t,r,n,o,h){var d,u,l,c,f,v,g;if(!t||!r||arguments.length<3)a.warn("`setValue` requires three arguments.",{topic:this.name,id:t});else if(this.exists(t))if(d=this.attributes[r])if(d.readOnly)a.warn("Attribute is readOnly.",{topic:this.name,id:t,attr:r});else if("initOnly"!==d.writeOnce||o)if(!0===d.writeOnce&&this._data[t][r])a.warn("Attribute can only be set once.",{topic:this.name,id:t,attr:r});else{if(l=this.getValue(t,r),c=this._data[t][r],d.isListProxy&&(l=c),!h&&d.validator){if(v=d.validator,!e.Lang.isFunction(v))return void a.warn("Attribute has an invalid validator.",{topic:this.name,validator:d.validator,attr:r});if(!v.apply(this,[n,t]))return void a.info("Attribute validation failed.",{topic:this.name,id:t,val:n,attr:r})}n=s(n),!h&&d.setter&&(n=d.setter.apply(this,[n,t])),d.isListProxy&&!e.Lang.isArray(n)&&(n=[]),d.isCollection&&(n?"object"==typeof n&&n instanceof e.PagedCollection||(l?(c=l.getList(),l._setValue(n),n=l):(c=null,n=new e.PagedCollection(this,t,r,n))):n=new e.PagedCollection(this,t,r)),this._isDifferentValue(t,r,n,l)&&(!d.isModel||e.Lang.isObject(n)&&n.isModel?(o||(u=this._getAttributeValuesDerivedBy(t,r)),this._data[t][r]=n,d.isListProxy&&n&&(n.hasMinBoundary&&this.getValue(t,r).setMinBoundary(),n.hasMaxBoundary&&this.getValue(t,r).setMaxBoundary()),(d.isModel||d.isListProxy||d.isCollection)&&this._chainEvents(t,r),o||(f=this.getValue(t,r),d.isListProxy||d.isCollection||this._setUnsaved(t,r,f,l,c),g={id:t,attrName:r,prevVal:l,newVal:f},d.isListProxy?g.listDiff=this._calcListDiff(f,l):d.isCollection&&(g.listDiff=this._calcListDiff(f,c)),this._queueEvent("valuesChanged",g),e.Object.size(u)&&e.Object.each(u,function(e,s){var a=this.getValue(t,s);i(a,e)||(g={id:t,attrName:s,prevVal:e,newVal:a,derivedBy:[r]},(this.attributes[s].isListProxy||this.attributes[s].isCollection)&&(g.listDiff=this._calcListDiff(a,e)),this._queueEvent("valuesChanged",g))},this))):a.warn("Attribute must be a ModelProxy instance.",{topic:this.name,id:t,attr:r}))}else a.warn("Attribute can only be set during initialization.",{topic:this.name,id:t,attr:r});else a.warn("Attribute is not present in the attributes list.",{topic:this.name,id:t,attr:r});else a.warn("`setValue called for an id that is not in the registry.",{topic:this.name,id:t})},setValues:function(t,i){var s={};e.Object.each(i,function(e,i){"id"!==i&&(s[i]=this.setValue(t,i,e))},this)},revertValue:function(e,t){this._unsavedModels[e]&&void 0!==this._unsavedModels[e][t]&&this.setValue(e,t,this._unsavedModels[e][t].lastSavedValRaw)},exists:function(t){var i;return i=e.Lang.isArray(t)?t[0]:e.Lang.isObject(t,!0)?this.attributeSearch(t)[0]:t,!!this._data[i]},addOrUpdate:function(e){if(this.exists(e.id)){var t,i;Object.keys(e).forEach(function(s){t=this.attributes[s],i=e[s],t&&!t.readOnly&&"initOnly"!==t.writeOnce&&this.setValue(e.id,s,i)},this)}else this.add(e);return this.appContext.markAsNewlyFetched(this.name,e.id),this.markChildModelsAsNewlyFetched(e.id),this.proxy(e.id)},markChildModelsAsNewlyFetched:function(e){var t=this;this.getOwnedModels(e).forEach(function(e){e&&(t.appContext.markAsNewlyFetched(e.registry.name,e.id),e.markChildModelsAsNewlyFetched(e.id))})},getOwnedModels:function(t){var i,s,r,n=[];if(!t)return a.warn("`getOwnedModels` requires a model id.",{topic:this.name,id:t}),n;if(!this.exists(t))return n;this._ModelProxy||(this._ModelProxy=e.getModelProxyConstructor(this));for(i in this.attributes)(s=this.attributes[i]).isModel?(r=this.getValue(t,i))&&r.exists()&&n.push(r):(s.isListProxy||s.isCollection)&&(n=n.concat(this.getValue(t,i).getList().filter(function(e){return e&&e.isModel&&e.exists()})));return n},hasAttribute:function(e){return!!this.attributes[e]},toJSON:function(e){var t,i,s={};if(e)for(t in this.attributes)s[t]=this.getValue(e,t),s[t]&&(this.attributes[t].isModel||this.attributes[t].isListProxy||this.attributes[t].isCollection)&&(s[t]=s[t].toJSON());else for(i in this._data)s[i]=this.toJSON(i);return s},on:function(t,i,s,a){var r;return t||(t=null),r={eventName:i,fn:s,id:t,weak:a},this._subscribers.push(r),a&&(this.hasWeakSubscribers=!0),{detach:function(){var t=e.Array.indexOf(this._subscribers,r);this._subscribers.splice(t,1)}.bind(this)}},removeWeakSubscribers:function(){var e=this._subscribers.length;if(e)for(;e--;)this._subscribers[e].weak&&this._subscribers.splice(e,1);this.hasWeakSubscribers=!1},getCount:function(){return this._dataSize},getDefaultValue:function(e,t){var i,s;return"function"==typeof(i=this.attributes[t]).defaultFn&&(s=i.defaultFn.call(this,e)),void 0===s&&void 0!==i.defaultValue&&(s=i.defaultValue),s},_isDifferentValue:function(e,t,s,a){var r=this.attributes[t],n=r.getter;if(n&&(s=n.apply(this,[s,e])),void 0!==r.isListProxy&&r.isListProxy&&void 0!==a){if(s.hasMaxBoundary!==(void 0!==a.hasMaxBoundary&&a.hasMaxBoundary)||s.hasMinBoundary!==(void 0!==a.hasMinBoundary&&a.hasMinBoundary))return!0}else if(r.isCollection)return!0;return!i(s,a)},_calcListDiff:function(t,i){var s,a,r,n,o={added:null,removed:null};return s=t instanceof e.ListProxy||t instanceof e.PagedCollection?t.getList():t,a=i instanceof e.ListProxy||i instanceof e.PagedCollection?i.getList():i,r=a.reduce(function(e,t){return t&&t.id&&(e[t.id]=!0),e},{}),n=s.reduce(function(e,t){return t&&t.id&&(e[t.id]=!0),e},{}),o.added=s.filter(function(e){return e&&!r[e.id]}),o.removed=a.filter(function(e){return e&&!n[e.id]}),o},_getAttributesDerivedBy:function(t){return this._derivedCache||(this._derivedCache={},e.Object.each(this.attributes,function(t,i){t.derivedBy&&e.Lang.isArray(t.derivedBy)&&e.Array.each(t.derivedBy,function(e){this._derivedCache[e]||(this._derivedCache[e]=[]),this._derivedCache[e].push(i)},this)},this)),this._derivedCache[t]},_getAttributeValuesDerivedBy:function(t,i){var s=this._getAttributesDerivedBy(i),a={};return s&&s.length&&e.Array.each(s,function(e){a[e]=this.getValue(t,e)},this),a},_queueEvent:function(t,i){var s;this._eventQueue||(this._eventQueue=[]),(s=this._eventQueue).push({type:t,data:i}),this._eventPending||(this._eventPending=!0,setTimeout(function(){var t={};this._eventPending=!1,delete this._eventQueue,e.Array.each(s,function(e){var i=e.type,s=e.data,a=s.id;switch(i){case"modelsAdded":case"modelsRemoved":t[i]=t[i]||{},t[i][a]=s;break;case"valuesChanged":if(t.valuesChanged&&t.valuesChanged[a]&&t.valuesChanged[a][s.attrName]&&t.valuesChanged[a][s.attrName].newVal){t.valuesChanged[a][s.attrName].newVal=s.newVal,t.valuesChanged[a][s.attrName].derivedBy&&s.derivedBy&&(t.valuesChanged[a][s.attrName].derivedBy=t.valuesChanged[a][s.attrName].derivedBy.concat(s.derivedBy)),t.valuesChanged[a][s.attrName].chained&&!s.chained&&delete t.valuesChanged[a][s.attrName].chained;break}t.valuesChanged=t.valuesChanged||{},t.valuesChanged[a]=t.valuesChanged[a]||{},t.valuesChanged[a][s.attrName]=s}}),e.Object.each(t,function(e,t){this._fireEvent(t,e)},this)}.bind(this),0))},_fireEvent:function(t,i){e.Array.each(this._subscribers,function(e){e.eventName===t&&(e.id?i[e.id]&&e.fn.call(void 0,i[e.id]):e.fn.call(void 0,i))})},_chainEvents:function(t,i){var s,a,r=this.attributes[i];this._chainedEvents[t]=this._chainedEvents[t]||{},r.isModel?(this._chainedEvents[t][i]&&this._chainedEvents[t][i].detach(),a=this.getValue(t,i),this._chainedEvents[t][i]=a.on("valuesChanged",function(e){this._queueChainedEvent(t,i)}.bind(this))):(r.isListProxy||r.isCollection)&&(this._chainedEvents[t][i]&&e.Array.each(this._chainedEvents[t][i],function(e){e.detach()}),this._chainedEvents[t][i]=[],s=this.getValue(t,i),e.Array.each(s.getList(),function(e){e&&this._chainedEvents[t][i].push(e.on("valuesChanged",function(e){this._queueChainedEvent(t,i)}.bind(this)))},this))},_queueChainedEvent:function(t,i){var s,a=this.getValue(t,i);this._queueEvent("valuesChanged",{id:t,attrName:i,prevVal:a,newVal:a,chained:!0}),s=this._getAttributeValuesDerivedBy(t,i),e.Object.size(s)&&e.Object.each(s,function(e,s){this._queueEvent("valuesChanged",{id:t,attrName:s,newVal:e,derivedBy:[i],chained:!0})},this)},_deleteUnsaved:function(t,i){this._unsavedModels[t]&&this._unsavedModels[t][i]&&(delete this._unsavedModels[t][i],0===e.Object.size(this._unsavedModels[t])&&delete this._unsavedModels[t])},_setUnsaved:function(e,t,s,a,r){this._unsavedModels[e]&&this._unsavedModels[e][t]?i(s,this._unsavedModels[e][t].lastSavedVal)&&this._deleteUnsaved(e,t):(this._unsavedModels[e]=this._unsavedModels[e]||{},this._unsavedModels[e][t]={lastSavedVal:a,lastSavedValRaw:r})},_validateAttributes:function(){var t,i;t=["setter","getter","validator","defaultValue","defaultFn","derivedBy","readOnly","writeOnce","isModel","serialize","deserialize"],i=["isListProxy","isCollection","pageFetch","contextFetch","rangeFetch"],e.Object.each(this.attributes,function(s,r){e.Object.each(s,function(n,o){s.isListProxy||s.isCollection?-1===e.Array.indexOf(i,o)&&a.warn("Unknown property on collection attribute.",{topic:this.name,prop:o,attr:r}):-1===e.Array.indexOf(t,o)&&a.warn("Unknown property on attribute.",{topic:this.name,prop:o,attr:r})},this)},this)},_setDefaultRemoteMethods:function(){this.remote=this.remote||{},this.remote.create||(this.remote.create=function(t){return a.error("`remote.create` was called without being implemented.",{topic:this.name,attrs:t}),e.Promise.reject()}),this.remote.read||(this.remote.read=function(t){Object.keys(this.attributes).some(function(e){var t=this.attributes[e];if(!("id"===e||t.readOnly||t.isListProxy||t.isCollection||t.defaultValue||t.defaultFn))return!0},this),"object"!=typeof t&&(t={id:t});var i={id:t.id};return this.add(i),e.Promise.resolve(i)}),this.remote.update||(this.remote.update=function(t,i){return a.error("`remote.update` was called without being implemented.",{topic:this.name,id:t,attrs:i}),e.Promise.reject()}),this.remote.delete||(this.remote.delete=function(t){return a.error("`remote.delete` was called without being implemented.",{topic:this.name,id:t}),e.Promise.reject()})},remoteCreate:function(e){return this.remote.create.call(this,e)},remoteRead:function(e){return this.remote.read.call(this,e)},remoteUpdate:function(t){var i={},s=this;return this._unsavedModels[t]&&e.Object.each(this._unsavedModels[t],function(e,s){i[s]={newVal:this.getValue(t,s),prevVal:e.lastSavedVal}},this),e.Object.size(i)>0?this.remote.update.call(this,t,i).then(function(e){return s._unsavedModels={},e}):e.Promise.resolve()},remoteBatchUpdate:function(e,t){return this.remote.batchUpdate.call(this,e,t)},remoteDelete:function(e){var t=this;return this.remote.delete.call(this,e).then(function(){t.remove(e)})},getListPageByContinuation:function(t,i){var s,a,r,n,o,h,d,u,l,c,f=this,v=f.appContext,g=e.APIHelper.request.getRebootPhotoExtras();switch(f.name){case"photo-groups-models":s="group-pool-models",a="groups",r="flickr.photos.getGroups",n="groups.group",g+=","+e.APIHelper.request.getRebootGroupExtras();break;case"photo-sets-models":s="set-models",a="sets",r="flickr.photos.getSets",n="sets.set";break;case"photo-galleries-models":s="gallery-models",a="galleries",r="flickr.photos.getGalleries",n="galleries.gallery"}return r?f.exists(t)?(f.continuationKeys=f.continuationKeys||{},f.getMorePromises=f.getMorePromises||{},"-1"===(h=f.continuationKeys[t]||"0")?e.Promise.resolve({newItems:[],loadedAll:!0}):("0"===h&&(i+=f.getValue(t,a).getList().length),o={photo_id:t,extras:g,primary_photo_extras:"url_sq, url_t, url_s, url_m",continuation:h,per_page:i},u=t+"_"+h,(l=f.getMorePromises[u])?l:(c={apiResponse:v.callAPI(r,o,!0),contextRegistry:v.getModelRegistry(s),personRegistry:v.getModelRegistry("person-models")},"photo-groups-models"===f.name&&(c.groupRegistry=v.getModelRegistry("group-models")),f.getMorePromises[u]=new e.FlickrPromise(c).then(function(i){var s,r,o,h=[],l=i.apiResponse,c=i.contextRegistry,v=i.personRegistry,g=i.groupRegistry;return(r=n.split(".").reduce(function(t,i){return e.Lang.isObject(t)?t[i]:void 0},l))&&(e.Array.each(r,function(t){e.APIHelper.response.addContextToRegistry(t,c,v,g),h.push(c.proxy(t.id))}),h.length&&(o=f.getValue(t,a).getList().map(function(e){return e.getValue("id")}),(h=h.filter(function(e){return-1===o.indexOf(e.getValue("id"))})).length&&f.getValue(t,a).appendToListMulti(h))),void 0===(d=l[a].continuation)?d="-1":e.Lang.isNumber(d)&&(d+=""),s="-1"===d,f.continuationKeys[t]=d,delete f.getMorePromises[u],{newItems:h,loadedAll:s}},function(e){throw delete f.getMorePromises[u],e}),f.getMorePromises[u]))):e.Promise.reject("[api-helper] getListPageByContinuation was called for an ID that isn't in the registry: "+t):e.Promise.reject("[api-helper] getListPageByContinuation was called without an invalid registry type: "+f.name)},getBuriedValue:function(e,t){var i,s={};return(i=this.getValue(e,t))&&i.payload&&(s=i.payload),s},setBuriedValue:function(e,t,i,s){return this.setValue(e,t,{payload:i},s)}},e.mix(r.prototype,e.Localizable)},"@VERSION@",{requires:["flickr-promise","model-proxy","list-proxy","moment","paged-collection","localizable"]});YUI.add("hermes-lang-models",function(o,O){o.Intl.add("hermes/models","en-US",{YOUR_PHOTOSTREAM:["Your photostream"],USER_PHOTOSTREAM:["${name}","'s photostream"],USER_PHOTOS:["${name}","'s photos"],PHOTOSTREAM:["Photostream"],YOUR_FAVORITES:["Your favorites"],USER_FAVORITES:["${name}","'s favorites"],FAVORITES:["Favorites"],ZERO_PHOTOS:["0 photos"],ONE_PHOTO:["1 photo"],MULTIPLE_PHOTOS:["${photos}"," photos"],PLURAL_PHOTOS:[{type:"plural",valueName:"count",options:{one:"${#} photo",other:"${#} photos"}}],ONE_VIDEO:["1 video"],ONE_PHOTO_AND_ONE_VIDEO:["1 photo and 1 video"],ONE_PHOTO_AND_ONE_VIDEO_AMP:["1 photo & 1 video"],MULTIPLE_PHOTOS_AND_ONE_VIDEO:["${photos}"," photos and 1 video"],MULTIPLE_PHOTOS_AND_ONE_VIDEO_AMP:["${photos}"," photos & 1 video"],MULTIPLE_VIDEOS:["${videos}"," videos"],ONE_PHOTO_AND_MULTIPLE_VIDEOS:["1 photo and ","${videos}"," videos"],ONE_PHOTO_AND_MULTIPLE_VIDEOS_AMP:["1 photo & ","${videos}"," videos"],MULTIPLE_PHOTOS_AND_MULTIPLE_VIDEOS:["${photos}"," photos and ","${videos}"," videos"],MULTIPLE_PHOTOS_AND_MULTIPLE_VIDEOS_AMP:["${photos}"," photos & ","${videos}"," videos"],PHOTO_LIST:["Photo list"],EXPlORE_TITLE:["Explore ","${id}"],BAD_DATE_TYPE:["Bad date type"],ZERO_ITEMS:["0 items"],ONE_ITEM:["1 item"],MULTIPLE_ITEMS:["${items}"," items"]})},"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-shared-entity",function(o,e){o.Intl.add("hermes/shared-entity","en-US",{USERNAME_HAS_SHARED_PHOTOS_ONLY:["${username}"," has shared ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}," with you!"],USERNAME_HAS_SHARED_VIDEOS_ONLY:["${username}"," has shared ",{type:"plural",valueName:"videoCount",options:{one:"${#} video",other:"${#} videos"}}," with you!"],USERNAME_HAS_SHARED_PHOTOS_VIDEOS:["${username}"," has shared ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}," ",{type:"plural",valueName:"videoCount",options:{one:"and ${#} video",other:"and ${#} videos"}}," with you!"],OWNER_HAS_SHARED_PHOTOS_ONLY:["You have shared ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}},"."],OWNER_HAS_SHARED_VIDEOS_ONLY:["You have shared ",{type:"plural",valueName:"videoCount",options:{one:"${#} video",other:"${#} videos"}},"."],OWNER_HAS_SHARED_PHOTOS_VIDEOS:["You have shared ",{type:"plural",valueName:"photoCount",options:{one:"${#} photo",other:"${#} photos"}}," ",{type:"plural",valueName:"videoCount",options:{one:"and ${#} video",other:"and ${#} videos"}},"."],VIEW_YOUR_SHARING_HISTORY:["View your sharing history"]})},"@VERSION@",{requires:["intl"]});YUI.add("flickr-favorites-add-updater",function(r,e){"use strict";r.namespace("ModelUpdaters")["flickr-favorites-add"]={run:function(o,t){var a={};return a.photo_id=o.photoId,t.callAPI("flickr.favorites.add",a).then(null,r.FetcherErrorLogger(e))}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});YUI.add("flickr-favorites-remove-updater",function(r,e){"use strict";r.namespace("ModelUpdaters")["flickr-favorites-remove"]={run:function(o,i){var t={};return t.photo_id=o.photoId,t.user_id=o.userId,i.callAPI("flickr.favorites.remove",t).then(null,r.FetcherErrorLogger(e))}}},"@VERSION@",{requires:["flickr-promise"],optional:[]});